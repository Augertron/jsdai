
-- see --RR for attempted fixes

-- 2000-04-17
-- ENTITY externally_defined_classification - where rule commented out.
-- ENTITY plant_item_connector wr4 commented out.
-- ENTITY plant_line_segment_definition wr11, wr12, wr13, wr14, wr15, wr16 commented out
-- ENTITY site_representation wr3, wr5, wr6, wr7 commented out.
-- ENTITY stream_design_case wr14, wr15, wr16, wr17, wr18, wr19, wr20, wr21, wr22, wr23 commented out.

SCHEMA plant_spatial_configuration;

USE FROM action_schema
  (action_directive,
   action_method_relationship,
   action_relationship,
   action_request_solution,
   action_request_status,
   action_status,
   directed_action,
   versioned_action_request);

USE FROM application_context_schema
  (application_context,
--RR: insert
	 application_context_element,
   application_protocol_definition,
   product_context,
   product_definition_context);

USE FROM approval_schema
  (approval,
   approval_date_time,
   approval_person_organization);

USE FROM date_time_schema
  (calendar_date,
   date_and_time);

USE FROM document_schema
  (document,
   document_relationship,
   document_usage_constraint);

USE FROM external_reference_schema
  (external_source,
   externally_defined_item,
   pre_defined_item);

USE FROM geometric_model_schema
  (block,
   boolean_operator,
   boolean_operand,
   boolean_result,
   brep_with_voids,
   csg_solid,
   extruded_area_solid,
   extruded_face_solid,
   faceted_brep,
   geometric_curve_set,
   geometric_set,
   geometric_set_replica,
--RR:
	 half_space_solid,
   manifold_solid_brep,
   revolved_area_solid,
   revolved_face_solid,
   right_circular_cone,
   right_circular_cylinder,
   shell_based_wireframe_model,
   solid_model,
   sphere,
   swept_face_solid,
   swept_area_solid,
   torus);

USE FROM geometry_schema
  (axis2_placement_2d,
   axis2_placement_3d,
   b_spline_curve,
   b_spline_curve_with_knots,
   b_spline_surface,
   b_spline_surface_with_knots,
   bezier_curve,
   bezier_surface,
   boundary_curve,
   bounded_curve,
   bounded_pcurve,
   bounded_surface,
   bounded_surface_curve,
   cartesian_point,
   circle,
   composite_curve,
   composite_curve_on_surface,
   composite_curve_segment,
   conic,
   conical_surface,
   curve_bounded_surface,
   curve_replica,
   cylindrical_surface,
   degenerate_pcurve,
   degenerate_toroidal_surface,
   direction,
   elementary_surface,
   ellipse,
   evaluated_degenerate_pcurve,
   geometric_representation_context,
   geometric_representation_item,
   hyperbola,
   intersection_curve,
   line,
   offset_curve_2d,
   offset_curve_3d,
   offset_surface,
   parabola,
   pcurve,
   plane,
   point,
   point_on_curve,
   point_on_surface,
   point_replica,
   polyline,
   quasi_uniform_curve,
   quasi_uniform_surface,
   rational_b_spline_curve,
   rational_b_spline_surface,
   reparametrised_composite_curve_segment,
   rectangular_composite_surface,
   rectangular_trimmed_surface,
   seam_curve,
   spherical_surface,
   surface_curve,
   surface_of_linear_extrusion,
   surface_of_revolution,
   surface_patch,
   surface_replica,
   swept_surface,
   toroidal_surface,
   trimmed_curve,
   uniform_curve,
   uniform_surface);

USE FROM group_schema
  (group);

USE FROM management_resources_schema
  (action_assignment,
   action_request_assignment,
   approval_assignment,
   date_and_time_assignment,
   date_assignment,
   document_reference,
   group_assignment,
   name_assignment,
   organization_assignment,
   person_and_organization_assignment,
   person_assignment);

USE FROM material_property_definition_schema
  (characterized_material_property,
   material_designation,
   material_designation_characterization,
   material_property,
   product_material_composition_relationship,
   property_definition_relationship);

USE FROM material_property_representation_schema
  (material_property_representation);

USE FROM measure_schema
  (amount_of_substance_measure,
   amount_of_substance_measure_with_unit,
   amount_of_substance_unit,
   area_measure,
   area_measure_with_unit,
   area_unit,
   context_dependent_measure,
   context_dependent_unit,
   conversion_based_unit,
   count_measure,
   derived_unit,
   electric_current_measure_with_unit,
   electric_current_unit,
   global_unit_assigned_context,
   length_measure,
   length_measure_with_unit,
   length_unit,
   mass_measure,
   mass_measure_with_unit,
   mass_unit,
   named_unit,
   numeric_measure,
   parameter_value,
   plane_angle_measure_with_unit,
   plane_angle_unit,
   positive_length_measure,
   positive_plane_angle_measure,
   positive_ratio_measure,
   ratio_measure,
   ratio_measure_with_unit,
   ratio_unit,
   si_unit,
   solid_angle_measure,
   solid_angle_measure_with_unit,
   solid_angle_unit,
   thermodynamic_temperature_measure,
   thermodynamic_temperature_measure_with_unit,
   thermodynamic_temperature_unit,
   time_measure,
   time_measure_with_unit,
   time_unit,
   volume_measure,
   volume_measure_with_unit,
   volume_unit);

USE FROM qualified_measure_schema
  (descriptive_representation_item,
   measure_representation_item,
   qualified_representation_item,
   type_qualifier);

USE FROM person_organization_schema
  (organization,
   organizational_project);

USE FROM presentation_organization_schema
  (presentation_layer_assignment);

USE FROM presentation_resource_schema
  (colour,
   colour_rgb);

USE FROM product_definition_schema
  (product,
   product_category,
   product_category_relationship,
   product_definition,
   product_definition_formation,
   product_definition_formation_relationship,
   product_definition_formation_with_specified_source,
   product_definition_relationship,
   product_definition_substitute,
   product_definition_with_associated_documents,
   product_related_product_category);

USE FROM product_property_definition_schema
  (characterized_object,
   product_definition_shape, 
   property_definition, 
   shape_aspect,
   shape_aspect_relationship);

USE FROM product_property_representation_schema
  (property_definition_representation, 
   shape_definition_representation, 
   shape_representation);

USE FROM product_structure_schema
  (assembly_component_usage,
   make_from_usage_option,
   product_definition_usage);

USE FROM representation_schema
  (mapped_item,
   representation,
   representation_context,
   representation_item);

USE FROM shape_aspect_definition_schema
  (centre_of_symmetry,
   derived_shape_aspect);

USE FROM shape_dimension_schema
  (angular_location,
   dimensional_characteristic_representation,
   dimensional_location,
   dimensional_size,
   shape_dimension_representation);

USE FROM topology_schema
  (connected_face_set,
   edge,
   edge_curve,
   edge_loop,
   face,
   face_bound,
   face_surface,
   loop,
   oriented_closed_shell,
   oriented_edge,
   oriented_open_shell,
   path,
   poly_loop,
   topological_representation_item);
(*

      Note þ The schemas referenced above can be found in the following parts of ISO 10303:
    
          action_schema                  ISO 10303-41
          application_context_schema     ISO 10303-41
          approval_schema                ISO 10303-41
          date_time_schema               ISO 10303-41
          document_schema                ISO 10303-41
          external_reference_schema      ISO 10303-41
          geometric_model_schema         ISO 10303-42
          geometry_schema                ISO 10303-42
          group_schema                   ISO 10303-41
          management_resources_schema    ISO 10303-41
          material_property_definition_schemaISO 10303-45
          measure_schema                 ISO 10303-41
          person_organization_schema     ISO 10303-41
          presentation_organization_schemaISO 10303-46
          presentation_resource_schema   ISO 10303-46
          product_definition_schema      ISO 10303-41
          product_property_definition_schemaISO 10303-41
          product_property_representation_schemaISO 10303-41
          product_structure_schema       ISO 10303-44
          qualified_measure_schema       ISO 10303-45
          representation_schema          ISO 10303-43
          shape_aspect_definition_schema ISO 10303-47
          shape_dimension_schema         ISO 10303-47
          topology_schema                ISO 10303-42

5.2.1  Fundamental concepts and assumptions

For a given item, non-shape properties are handled through a property_definition.  All non-shape
properties are grouped together and evaluated by a function for consistency.  Shape properties are dealt
with as a subtype and evaluated separately using shape_definition.

Any identifier is used to differentiate between instances of an entity with respect to a scope of use or
implementation of the identifier.  If used in data exchange, the value of the identifier shall be unique
within the exchange file and, additionally, may be unique between the partners in the exchange.

      EXAMPLE  - Representation_context.context_identifier may be any user-defined identifier that
      is used to differentiate contexts.  REPCXT1, for example, may identify a representation_context.

Any type is used to specify the intent of the instance.

      EXAMPLE  - Representation_context.context_type may be `parametric' if the geometry of a part
      is represented parametrically.

Units for a particular dimension specified in this part of ISO 10303 must be either globally specified
or individually specified for each dimensional value.  Different kinds dimensions (e.g., length versus
weight), however, may be either specified global or locally.

Connectors are shape_aspects of the plant items that they belong to because they cannot exist
independently.  Connections are, therefore, a shape_aspect_relationship.  Connections are also a
shape_aspect of the assembly that contains the connection, so connections are also shape_aspects. 

5.2.2  Plant spatial configuration type definitions

5.2.2.1  approval_item

An approval_item identifies a change_action or versioned_action_request that is assigned an
approval status. 

EXPRESS specification:

*)
TYPE approval_item = SELECT
  (change_action,
   versioned_action_request);
END_TYPE;
(*

5.2.2.2  change_delta_item

A change_delta_item identifies the assembly_component_usage, axis2_placement_2d, axis2_-
placement_3d, line_branch_connection, line_plant_item_branch_connection, line_plant_item_-
connection, line_termination_connection, plant, product, or product_definition_relationship that
is the association between two change_items.

EXPRESS specification:

*)
TYPE change_delta_item = SELECT
  (assembly_component_usage,
   axis2_placement_2d,
   axis2_placement_3d,
   line_branch_connection,
   line_plant_item_branch_connection,
   line_plant_item_connection,
   line_termination_connection,
   plant,
   product,
   product_definition_relationship);
END_TYPE;
(*

5.2.2.3  change_item

A change_item identifies the change_delta_item, document, ducting_system, electrical_system,
externally_defined_plant_item_definition, instrumentation_and_control_system, piping_system,
plant_item_connection, plant_item_connector, plant_line_definition, plant_line_segment_-
definition, plant_line_segment_termination, process_capability, product_definition, product_-
definition_shape, property_definition, reference_geometry, site, site_feature, or structural_system
that can be modified, for which there is a request to modify, or that is the result of a change.

EXPRESS specification:

*)
TYPE change_item = SELECT
  (change_delta_item,
   document,
   ducting_system,
   electrical_system,
   externally_defined_plant_item_definition,
   instrumentation_and_control_system,
   piping_system,
   plant_item_connection,
   plant_item_connector,
   plant_line_definition,
   plant_line_segment_definition,
   plant_line_segment_termination,
   process_capability,
   product_definition,
   product_definition_shape,
   property_definition,
   reference_geometry,
   site,
   site_feature,
   structural_system);
END_TYPE;
(*

5.2.2.4  classification_item

A classification_item identifies the ducting_system, electrical_system, instrumentation_and_-
control_system, piping_component_definition, piping_system, plant_item_connection, plant_-
item_connector, plant_spatial_configuration_document_reference, product, product_definition,
or structural_system that is classified.

EXPRESS specification:

*)
TYPE classification_item = SELECT
   (ducting_system,
   electrical_system,
   instrumentation_and_control_system,
   piping_component_definition,
   piping_system,
   plant_item_connection,
   plant_item_connector,
   plant_spatial_configuration_document_reference,
   product,
   product_definition,
   structural_system);
END_TYPE;
(*

5.2.2.5  design_project_item

A design_project_item identifies the product_definition that is assigned to a design_project.

EXPRESS specification:

*)
TYPE design_project_item = SELECT
  (product_definition);
END_TYPE;
(*

5.2.2.6  plant_spatial_configuration_action_request_item

A plant_spatial_configuration_action_request_item identifies the product that is assigned to an
action_request, indicating a request for purchase.

EXPRESS specification:

*)
TYPE plant_spatial_configuration_action_request_item = SELECT
  (product);
END_TYPE;
(*

5.2.2.7  plant_spatial_configuration_date_and_time_item

A plant_spatial_configuration_date_and_time_item identifies the product that a date_and_time
is assigned to.

EXPRESS specification:

*)
TYPE plant_spatial_configuration_date_and_time_item = SELECT
  (product);
END_TYPE;
(*

5.2.2.8  plant_spatial_configuration_dated_item

A plant_spatial_configuration_dated_item identifies the action_directive, change_action, change_-
item, or product that a date is assigned to.

EXPRESS specification:

*)
TYPE plant_spatial_configuration_dated_item = SELECT
  (action_directive,
   change_action,
   change_item,
   product);
END_TYPE;
(*

5.2.2.9  plant_spatial_configuration_document_item

A plant_spatial_configuration_document_item identifies the heat_tracing_representation, piping_-
component_class, piping_system, plant_item_connector, plant_line_segment_definition, product,
product_definition, product_definition_relationship, property_definition, representation,
representation_item, or site that is associated with a document.

EXPRESS specification:

*)
TYPE plant_spatial_configuration_document_item = SELECT
  (heat_tracing_representation,
   piping_component_class,
   piping_system,
   plant_item_connector,
   plant_line_segment_definition,
   product,
   product_definition,
   product_definition_relationship,
   property_definition,
   representation,
   representation_item,
   site);
END_TYPE;
(*

5.2.2.10  plant_spatial_configuration_organization_item

A plant_spatial_configuration_organization_item identifies the catalogue, change_action, design_-
project, document, plant, product_definition_formation, product_definition_relationship or site
that is associated with an organization.

EXPRESS specification:

*)
TYPE plant_spatial_configuration_organization_item = SELECT
  (catalogue,
   change_action,
   design_project,
   document,
   plant,
   product_definition_formation,
   product_definition_relationship,
   site);
END_TYPE;
(*

5.2.2.11  plant_spatial_configuration_person_item

A plant_spatial_configuration_person_item identifies the document, plant, product_definition_-
relationship, or site that is associated with a person.

EXPRESS specification:

*)
TYPE plant_spatial_configuration_person_item = SELECT
  (document,
   plant,
   product_definition_relationship,
   site);
END_TYPE;
(*

5.2.2.12  plant_spatial_configuration_person_and_organization_item

A plant_spatial_configuration_person_and_organization_item identifies the change_item, plant,
or site that is associated with a person_and_organization.

EXPRESS specification:

*)
TYPE plant_spatial_configuration_person_and_organization_item = SELECT
  (change_item,
   plant,
   site);
END_TYPE;
(*

5.2.2.13  purchase_item

A purchase_item identifies a product that is purchased.

EXPRESS specification:

*)
TYPE purchase_item = SELECT
  (product);
END_TYPE;
(*

5.2.3  Plant spatial configuration entities

5.2.3.1  Plant spatial configuration entity definitions

5.2.3.1.1  advanced_csg_shape_representation

An advanced_csg_shape_representation is a shape_representation that is composed of CSG
primitives and boolean operators.

EXPRESS specification:

*)
ENTITY advanced_csg_shape_representation
  SUBTYPE OF (shape_representation);
WHERE
  WR1: SIZEOF (QUERY (item <* SELF.items |
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.CSG_SOLID',
       'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID',
       'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID',
       'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D',
       'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM'] * TYPEOF (item)) = 1))) 
       = 0;
  WR2: SIZEOF (QUERY (item <* SELF.items |
       SIZEOF (['PLANT_SPATIAL_CONFIGURATION.CSG_SOLID',
       'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID',
       'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID',
       'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM'] * TYPEOF (item)) 
       = 1)) >= 1;
  WR3: SIZEOF (QUERY (item <* SELF.items |
       ('PLANT_SPATIAL_CONFIGURATION.CSG_SOLID' IN TYPEOF (item)) AND
       (NOT (valid_advanced_csg_tree
               (item\csg_solid.tree_root_expression))))) = 0;
  WR4: SIZEOF (QUERY (mi <* QUERY (item <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' IN TYPEOF (item)) |
       NOT ('PLANT_SPATIAL_CONFIGURATION.' +
       'ADVANCED_CSG_SHAPE_REPRESENTATION' IN
       TYPEOF (mi\mapped_item.mapping_source.mapped_representation)))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1:  Each item of an advanced_csg_shape_representation shall be a csg_solid, extruded_area_
solid, revolved_area_solid, axis2_placement_3d, or mapped_item.

WR2:  An advanced_csg_shape_representation shall have at least one representation_item instance
in its set of items that is of type csg_solid, extruded_area_solid, revolved_area_solid, or mapped_
item.

WR3:  An advanced_csg_shape_representation shall be comprised of the proper CSG tree elements. 

WR4:  For each mapped_item in an advanced_csg_shape_representation, the source of the
mapped_item shall be an advanced_csg_shape_representation.

5.2.3.1.2  blank_fitting_classification

A blank_fitting_classification is a type of group that classifies the items that are assigned to it as
blank fittings.

EXPRESS specification:

*)
ENTITY blank_fitting_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'blank'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A blank_fitting_classification shall classify items of type piping_component_definition.

WR2: A blank_fitting_classification shall classify items of type piping_component_definition that
are a definition of a product that is categorized as a `blank'.

5.2.3.1.3  catalogue

A catalogue is a document defined as an external_source that records items whose characteristics
are standardized.

      NOTE - Whether the catalogue is a paper-based or digitally-based catalogue is indicated by the value
      of the attribute document_type.product_data_type.  document_type is referenced the attribute kind
      inherited from document, a supertype of catalogue. 

EXPRESS specification:

*)
ENTITY catalogue
  SUBTYPE OF (document, external_source);
END_ENTITY;
(*

5.2.3.1.4  catalogue_connector

A catalogue_connector is a shape_aspect that is externally defined and identifies a connector whose
characteristics are standardised in a library or catalogue.

EXPRESS specification:

*)
ENTITY catalogue_connector
  SUBTYPE OF (shape_aspect, externally_defined_item);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.CHARACTERIZED_OBJECT' IN 
       TYPEOF (SELF.of_shape);
  WR2: 'PLANT_SPATIAL_CONFIGURATION.CATALOGUE' IN TYPEOF (SELF.source);
END_ENTITY;
(*

Formal propositions:

WR1: The catalogue_connector shall be an aspect of the shape of a characterized_object.

WR2: The catalogue_connector shall have a catalogue as its source.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the catalogue_connector entity:

    þ subtype_mandatory_externally_defined_item (see 5.2.4.17).

5.2.3.1.5  catalogue_item

A catalogue_item is an externally_defined_plant_item_definition that identifies an item whose
characteristics are standardized and have been recorded in a library or catalogue.

EXPRESS specification:

*)
ENTITY catalogue_item
  SUBTYPE OF (externally_defined_plant_item_definition);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.CATALOGUE' IN TYPEOF (SELF.source);
  WR2: SELF.frame_of_reference.name = 'catalogue definition';
END_ENTITY;
(*

Formal propositions:

WR1:  A catalogue_item shall have a catalogue as the external_source.

WR2:  A catalogue_item shall have a frame_of_reference name of 'catalogue definition'. 

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the catalogue_item entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13);

    þ subtype_mandatory_externally_defined_item (see 5.2.4.17).

5.2.3.1.6  change_action

A change_action is a type of directed_action that identifies a change, or a request for a change.

EXPRESS specification:

*)
ENTITY change_action
  SUBTYPE OF (directed_action);
WHERE
  WR1: SIZEOF (QUERY (ca <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'ACTION_ASSIGNMENT.ASSIGNED_ACTION') |
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PLANT_SPATIAL_CONFIGURATION_CHANGE_ASSIGNMENT' IN 
       TYPEOF (ca))) >= 1;
  WR2: SIZEOF (QUERY (ar <* SELF\directed_action.directive.requests |
       NOT (SIZEOF (USEDIN (ar, 'PLANT_SPATIAL_CONFIGURATION.' +
       'ACTION_REQUEST_SOLUTION.SOLUTION')) = 1))) = 0;
  WR3: SIZEOF (USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.ACTION_STATUS.' +
       'ASSIGNED_ACTION')) = 1;
END_ENTITY;
(*

Formal propositions:

WR1:  A change_action shall be assigned by at least one plant_spatial_configuration_change_-
assignment.

WR2:  Each versioned_action_request that is referenced by a change_action shall have exactly one
action_request_solution.

WR3:  Each change_action shall be assigned exactly one action_status.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the change_action entity:

    þ change_action_requires_date (see 5.2.4.4);

    þ versioned_action_request_requires_change_action (see 5.2.4.19).

5.2.3.1.7  change_from_assignment

A change_from_assignment assigns a change_action to a set of one or more change_delta_items.

EXPRESS specification:

*)
ENTITY change_from_assignment
  SUBTYPE OF (action_assignment);
  items : SET [1:?] OF change_delta_item;
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.CHANGE_ACTION'
       IN TYPEOF (SELF.assigned_action);
END_ENTITY;
(*

Attribute definitions:

items: the set of change_delta_items that an action is assigned to.

Formal propositions:

WR1: The assigned action shall be a change_action.

5.2.3.1.8  change_item_id_assignment

A change_item_id_assignment assigns a name to a set of one or more change_items.

EXPRESS specification:

*)
ENTITY change_item_id_assignment
  SUBTYPE OF (name_assignment);
  items : SET [1:?] OF change_item;
END_ENTITY;
(*

Attribute definitions:

items: the set of change_items that a name is assigned to.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the change_item_id_-
assignment entity:

    þ change_item_requires_id (see 5.2.4.6).

5.2.3.1.9  change_to_assignment

A change_to_assignment assigns a change_action to a set of one or more change_delta_items.

EXPRESS specification:

*)
ENTITY change_to_assignment
  SUBTYPE OF (action_assignment);
  items : SET [1:?] OF change_delta_item;
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.CHANGE_ACTION'
       IN TYPEOF (SELF.assigned_action);
END_ENTITY;
(*

Attribute definitions:

items: the set of change_delta_items that an action is assigned to.

Formal propositions:

WR1: The assigned action shall be a change_action.

5.2.3.1.10  classification_assignment

A classification_assignment assigns a classification to a ducting_system, electrical_system,
instrumentation_and_control_system, piping_component_definition, piping_system, plant_item_-
connection, plant_item_connector, plant_spatial_configuration_document_reference, product,
product_definition, or structural_system.

EXPRESS specification:

*)
ENTITY classification_assignment
  SUBTYPE OF (group_assignment);
  items : SET [1:?] OF classification_item;
WHERE
  WR1: (NOT (SIZEOF (QUERY (item <* SELF.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTION' IN
       TYPEOF(item)))) = 0)) OR 
       (SIZEOF (TYPEOF (SELF.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.CONNECTION_FUNCTIONAL_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTION_MOTION_CLASSIFICATION'])
       >= 1);
  WR2: (NOT (SIZEOF (QUERY (item <* SELF.items | 
       NOT ('PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN
       TYPEOF(item)))) = 0)) OR
       (SIZEOF (TYPEOF (SELF.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.EXTERNALLY_DEFINED_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'STRUCTURAL_LOAD_CONNECTOR_CLASSIFICATION']) >= 1);
  WR3: (NOT (SIZEOF (QUERY (item <* SELF.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF(item)))) = 0)) OR
       (SIZEOF (TYPEOF (SELF.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.BLANK_FITTING_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.ELBOW_FITTING_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.FLANGE_FITTING_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'FLANGE_FITTING_NECK_TYPE_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.PIPE_CLOSURE_FITTING_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.PIPE_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.REDUCER_FITTING_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.SPACER_FITTING_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.SPECIALTY_ITEM_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.SWAGE_FITTING_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.VALVE_CLASSIFICATION']) >= 1);
END_ENTITY;
(*

Attribute definitions:

items: the set of ducting_system, electrical_system, instrumentation_and_control_system, piping_-
component_definition, piping_system, plant_item_connection, plant_item_connector,
plant_spatial_configuration_document_reference, product, product_definition, or structural_-
system that are assigned to a group.

Formal propositions:

WR1: A plant_item_connection shall be assigned either a connection_functional_classification, a
connection_motion_classification, or a combination of these.

WR2: A plant_item_connector shall be assigned either a connector_end_type_classification,
electrical_connector_classification, piping_connector_classification, structural_load_connector_-
classification, or a combination of these.

WR3: A piping_component_definition shall be assigned either a blank_fitting_classification,
elbow_fitting_classification, flange_fitting_classification, flange_fitting_neck_type_classification,
pipe_closure_fitting_classification, pipe_classification, reducer_fitting_classification, spacer_-
fitting_classification, specialty_item_classification, swage_fitting_classification, valve_classification,
or a combination of these.

5.2.3.1.11  connection_functional_classification

A connection_functional_classification is a group that classifies items that are assigned to it as
belonging to a common functional classification of connections.

EXPRESS specification:

*)
ENTITY connection_functional_classification
  SUBTYPE OF (group);
END_ENTITY;
(*

5.2.3.1.12  connection_motion_classification

A connection_motion_classification is a type of group that classifies the connection motion of the
items that are assigned to it.

EXPRESS specification:

*)
ENTITY connection_motion_classification
  SUBTYPE OF (group);
WHERE
  WR1: SELF.name IN ['flexible', 'locked orientation'];
END_ENTITY;
(*

Formal propositions:

WR1: The name of the connection_motion_classification shall be `flexible' or `locked orientation'.

5.2.3.1.13  connection_node

A connection_node is a type of shape_aspect that is part of the definition of a piping system, and
connects more than one line_termination_connections.

EXPRESS specification:

*)
ENTITY connection_node
  SUBTYPE OF (shape_aspect);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM'
       IN TYPEOF (SELF.of_shape.definition);
  WR2: SIZEOF (QUERY (sar <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT_RELATIONSHIP.' +
       'RELATING_SHAPE_ASPECT') |
       'PLANT_SPATIAL_CONFIGURATION.LINE_TERMINATION_CONNECTION' IN
       TYPEOF (sar))) >= 2;
END_ENTITY;
(*

Formal propositions:

WR1: A connection_node shall be an aspect of the definition of the shape of a piping_system.

WR2: A connection_node shall be the relating_shape_aspect for at least two line_termination_-
connections.

5.2.3.1.14  connector_end_type_classification

A connector_end_type_classification is a type of group that classifies the end type of the connectors
that are assigned to it.

EXPRESS specification:

*)
ENTITY connector_end_type_classification
  SUBTYPE OF (group);
END_ENTITY;
(*

5.2.3.1.15  descriptive_colour

A descriptive_colour is a type of descriptive_representation_item that identifies a colour.

EXPRESS specification:

*)
ENTITY descriptive_colour
  SUBTYPE OF (colour, descriptive_representation_item);
END_ENTITY;
(*

5.2.3.1.16  design_project

A design_project is a type of organization that identifies a task with a defined scope and purpose.

EXPRESS specification:

*)
ENTITY design_project
  SUBTYPE OF (organization);
WHERE
  WR1: SIZEOF (USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'ORGANIZATION_ASSIGNMENT.ASSIGNED_ORGANIZATION')) >= 1;
END_ENTITY;
(*

Formal propositions:

WR1: Each design_project shall be assigned to product data by at least one organization_-
assignment.

5.2.3.1.17  design_project_assignment

A design_project_assignment assigns a product_definition to a design_project.

EXPRESS specification:

*)
ENTITY design_project_assignment
  SUBTYPE OF (organization_assignment);
  items : SET [1:?] OF design_project_item;
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.DESIGN_PROJECT' IN
       TYPEOF (SELF.assigned_organization);
END_ENTITY;
(*

Attribute definitions:

items: the set of product_definitions that are assigned to a design_project.

Formal propositions:

WR1: The organization that is assigned by a design_project_assignment shall be a design_project.

5.2.3.1.18  ducting_system

A ducting_system is a type of product_definition that identifies a system that controls the
temperature, humidity, cleanliness, and circulation of environmental air.

EXPRESS specification:

*)
ENTITY ducting_system
  SUBTYPE OF (product_definition);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       ('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF
       (pdr.relating_product_definition.formation.of_product)) AND
       (pdr.relating_product_definition.frame_of_reference.name =
       'functional occurrence'))) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: The ducting_system shall be related to exactly one product_definition that is the definition
of a plant and has a context of `functional occurrence'.

5.2.3.1.19  elbow_fitting_classification

An elbow_fitting_classification is a type of group that classifies the items that are assigned to it as
elbow fittings.  The name of the elbow_fitting_classification further classifies the assigned items.

EXPRESS specification:

*)
ENTITY elbow_fitting_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'elbow'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: An elbow_fitting_classification shall classify items of type piping_component_definition.

WR2: An elbow_fitting_classification shall classify items of type piping_component_definition that
are a definition of a product that is categorized as a `elbow'.

5.2.3.1.20  electrical_connector_classification

An electrical_connector_classification is a type of group that classifies the items that are assigned
to it as being electrical connectors.  The name of the electrical_connector_classification further
classifies the assigned items.

EXPRESS specification:

*)
ENTITY electrical_connector_classification
  SUBTYPE OF (group);
END_ENTITY;
(*

5.2.3.1.21  electrical_system

An electrical_system is a type of product_definition that identifies a system of wiring, switches,
relays and other equipment associated with receiving and distributing electrical power.

EXPRESS specification:

*)
ENTITY electrical_system
  SUBTYPE OF (product_definition);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       ('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF
       (pdr.relating_product_definition.formation.of_product)) AND
       (pdr.relating_product_definition.frame_of_reference.name =
       'functional occurrence'))) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: The electrical_system shall be related to exactly one product_definition that is the definition
of a plant and has a context of `functional occurrence'.

5.2.3.1.22  externally_defined_classification

An externally_defined_classification is a group that classifies an item and is defined by reference
to an external source.

      NOTE - An external source may be a ISO 13584 classification table [13].  This standard would be
      specified as a known_source (see 5.2.3.1.31) and referenced with externally_defined_item.source.

EXPRESS specification:

*)
ENTITY externally_defined_classification
  SUBTYPE OF (group, externally_defined_item);
(* RR 
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ((SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.DUCTING_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.INSTRUMENTATION_AND_CONTROL_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.PLANT',
       'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR',
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION',
       'PLANT_SPATIAL_CONFIGURATION.STRUCTURAL_SYSTEM']) = 1) OR
       (('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION' |
       IN TYPEOF (it)) AND
       (SIZEOF (QUERY (pc <*
       it.formation.of_product.frame_of_reference |
       pc.discipline_type = 'process plant')) = 1))))) = 0))) = 0;
*)
END_ENTITY;
(*

Formal proposition:

WR1: An externally_defined_classification shall classify either an electrical_system, ducting_-
system, instrumentation_and_control_system, piping_system, plant, plant_item_connector,
piping_component_definition, structural_system, or product_definition that is the definition of a
plant item.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the externally_defined_-
classification entity:

    þ subtype_mandatory_externally_defined_item (see 5.2.4.17);

    þ subtype_mandatory_pre_defined_item (see 5.2.4.18).

5.2.3.1.23  externally_defined_plant_item_definition

An externally_defined_plant_item_definition is a product_definition that identifies an item or piece
of equipment that may be used as a component of a plant and is defined by reference to an external
source.

      NOTE - An external source may be a ISO 13584 library [13].  This standard would be specifed as a
      known_source (see 5.2.3.1.31) and referenced with externally_defined_item.source.

EXPRESS specification:

*)
ENTITY externally_defined_plant_item_definition
  SUBTYPE OF (product_definition, externally_defined_item);
END_ENTITY;
(*

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the externally_defined_plant_-
item_definition entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_context (see 5.2.4.10);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_context_discipline_type_constraint (see 5.2.4.12);

    þ product_definition_context_name_constraint (see 5.2.4.13);

    þ subtype_mandatory_externally_defined_item (see 5.2.4.17);

    þ subtype_mandatory_pre_defined_item (see 5.2.4.18).

5.2.3.1.24  flange_fitting_classification

A flange_fitting_classification is a type of group that classifies the items that are assigned to it as
flange fittings.

EXPRESS specification:

*)
ENTITY flange_fitting_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'flange'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A flange_fitting_classification shall classify items of type piping_component_definition.

WR2: A flange_fitting_classification shall classify items of type piping_component_definition that
are a definition of a product that is categorized as a `flange'.

5.2.3.1.25  flange_fitting_neck_type_classification

A flange_fitting_neck_type_classification is a type of group that classifies the neck type of the
flange fittings items that are assigned to it.

EXPRESS specification:

*)
ENTITY flange_fitting_neck_type_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'flange'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A flange_fitting_neck_type_classification shall classify items of type piping_component_-
definition.

WR2: A flange_fitting_neck_type_classification shall classify items of type piping_component_-
definition that are a definition of a product that is categorized as a `flange'.

5.2.3.1.26  heat_tracing_representation

A heat_tracing_representation is a representation that represents the means utilized to impart a
temperature increase by an external wrapping or coiling.

EXPRESS specification:

*)
ENTITY heat_tracing_representation
  SUBTYPE OF (representation);
END_ENTITY;
(*

5.2.3.1.27  hybrid_shape_representation

A hybrid_shape_representation is a type of shape_representation that is composed of CSG
primitives, boolean operators, manifold solid boundary representation solids, shell based wireframe
models, and curves.

EXPRESS specification:

*)
ENTITY hybrid_shape_representation
  SUBTYPE OF (shape_representation);
WHERE
WR1: SIZEOF (QUERY (i <* SELF\representation.items |
     NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.BOOLEAN_RESULT',
     'PLANT_SPATIAL_CONFIGURATION.CSG_SOLID',
     'PLANT_SPATIAL_CONFIGURATION.TRUNCATED_PYRAMID',
     'PLANT_SPATIAL_CONFIGURATION.BLOCK',
     'PLANT_SPATIAL_CONFIGURATION.TORUS',
     'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CYLINDER',
     'PLANT_SPATIAL_CONFIGURATION.SPHERE',
     'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CONE',
     'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID',
     'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID',
     'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D',
     'PLANT_SPATIAL_CONFIGURATION.MANIFOLD_SOLID_BREP',
     'PLANT_SPATIAL_CONFIGURATION.SHELL_BASED_WIREFRAME_MODEL',
     'PLANT_SPATIAL_CONFIGURATION.CONIC',
     'PLANT_SPATIAL_CONFIGURATION.CURVE',
     'PLANT_SPATIAL_CONFIGURATION.B_SPLINE_CURVE',
     'PLANT_SPATIAL_CONFIGURATION.LINE',
     'PLANT_SPATIAL_CONFIGURATION.POINT',
     'PLANT_SPATIAL_CONFIGURATION.POLYLINE',
     'PLANT_SPATIAL_CONFIGURATION.SURFACE',
     'PLANT_SPATIAL_CONFIGURATION.VECTOR',
     'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
     'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM'] *
      TYPEOF(i)) = 1))) = 0;
  WR2: SIZEOF (QUERY (mi <* QUERY (item <* SELF\representation.items |
       'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' IN TYPEOF(item)) |
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.' +
       'ADVANCED_CSG_SHAPE_REPRESENTATION',
       'PLANT_SPATIAL_CONFIGURATION.HYBRID_SHAPE_REPRESENTATION'] *
       TYPEOF(mi\mapped_item.mapping_source.mapped_representation)) 
       = 1))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A hybrid_shape_representation shall contain representation_items that are of type boolean_-
result, csg_solid, truncated_pyramid, block, torus, right_circular_cylinder, sphere, right_-
circular_cone, extruded_area_solid, revolved_area_solid, shell_based_wireframe_model,
manifold_solid_brep, conic, curve, b_spline_curve, line, point, polyline, surface, vector, axis2_-
placement_3d, measure_representation_item, or mapped_item.

WR2: If there is a mapped_item in a hybrid_shape_representation, the source of the mapped_item
shall be an advanced_csg_shape_representation or a hybrid_shape_representation.

5.2.3.1.28  inline_equipment

An inline_equipment is a type of piping_component_definition that identifies an item that is inserted
into the flow of a process stream.

EXPRESS specification:

*)
ENTITY inline_equipment
  SUBTYPE OF (piping_component_definition);
END_ENTITY;
(*

5.2.3.1.29  instrumentation_and_control_system

An instrumentation_and_control_system is a type of product_definition that identifies a system of
wiring, switches, controls, and other equipment associated with monitoring and controlling
performance characteristics.

EXPRESS specification:

*)
ENTITY instrumentation_and_control_system
  SUBTYPE OF (product_definition);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       ('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF
       (pdr.relating_product_definition.formation.of_product)) AND
       (pdr.relating_product_definition.frame_of_reference.name =
       'functional occurrence'))) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: The instrumentation_and_control_system shall be related to exactly one product_definition
that is the definition of a plant and has a context of `functional occurrence'.

5.2.3.1.30  interfering_shape_element

An interfering_shape_element identifies a portion of the shape of an item that interferes with the
shape of another item.

EXPRESS specification:

*)
ENTITY interfering_shape_element
  SUBTYPE OF (shape_aspect, shape_aspect_relationship);
END_ENTITY;
(*

5.2.3.1.31  known_source

A known_source is a type of external_source whose identification is standardized for all
implementations of this part of ISO 10303.  The purpose of the known_source entity data type is to
identify particular sources of data that are used within the scope of this part of ISO 10303, and to
associate specific data formats with such identification.  The following known sources of data are
identified in this part of ISO 10303:

    þ ISO 13584 Dictionaries, conforming to the requirements of ISO 13584-42.  In this Part of ISO
    10303, such Dictionaries are used to hold values of names for externally_defined_-
    classifications;

    þ ISO 13584 Parts Libraries, conforming to the requirements of ISO 13584-24.  In this Part of
    ISO 10303, such Parts Libraries are used to hold collections of catalogue_connector and
    externally_defined_plant_item_definition;

EXPRESS specification:

*)
ENTITY known_source
SUBTYPE OF (external_source, pre_defined_item);
WHERE
  WR1: SELF\pre_defined_item.name IN
       ['ISO 13584 Dictionary','ISO 13584 Parts Library'];
END_ENTITY;
(*

Formal propositions:

WR1: The name of the known_source inherited from the pre_defined_item shall be 'ISO 13584
Dictionary', or 'ISO 13584 Parts Library'.

Attribute value definitions:

The known_source shall be used as follows, based on the standard values of the name attribute.

ISO 13584 Dictionary: the known_source shall be a dictionary as defined in ISO 13584-42.  The
string value given as the item_id of an externally_defined_item that references this known_source
shall 
conform to the requirements for a Class_BSU as defined in ISO 13584-42.

ISO 13584 Parts Library: the known_source shall be a parts library as defined in ISO 13584-42. 
The string value given as the item_id of an externally_defined_item that references this known_-
source shall conform to the requirements for a BSU as defined in ISO 13584-42.

5.2.3.1.32  line_branch_connection

A line_branch_connection is a type of shape_aspect_relationship that identifies the connection
between a line and a branch.

EXPRESS specification:

*)
ENTITY line_branch_connection
  SUBTYPE OF (shape_aspect_relationship);
WHERE
  WR1: SELF.description = 'branch location';
  WR2: 'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION'
       IN TYPEOF (SELF.relating_shape_aspect.of_shape.definition);
  WR3: 'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION'
       IN TYPEOF (SELF.related_shape_aspect);
END_ENTITY;
(*

Formal propositions:

WR1: The value of line_branch_connection.description shall be `branch location'.

WR2: The product_definition that the relating_shape_aspect of a line_branch_connection is related
to shall be a plant_line_segment_definition.

WR3: The related_shape_aspect of a line_branch_connection shall be a plant_line_segment_-
termination.

5.2.3.1.33  line_less_piping_system

A line_less_piping_system is a type of product_definition that identifies a piping system that is not
part of a line.

EXPRESS specification:

*)
ENTITY line_less_piping_system
  SUBTYPE OF (product_definition);
END_ENTITY;
(*

5.2.3.1.34  line_plant_item_branch_connection

A line_plant_item_branch_connection is a shape_aspect_relationship that identifies the connection
between a line and a plant item connector that branches from the line.

EXPRESS specification:

*)
ENTITY line_plant_item_branch_connection
  SUBTYPE OF (shape_aspect_relationship);
END_ENTITY;
(*

5.2.3.1.35  line_plant_item_connection

A line_plant_item_ connection is a shape_aspect_relationship that identifies the connection between
a line segment and a plant item connector.

EXPRESS specification:

*)
ENTITY line_plant_item_connection
  SUBTYPE OF (shape_aspect_relationship);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION'
       IN TYPEOF (SELF.relating_shape_aspect);
  WR2: 'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR'
       IN TYPEOF (SELF.related_shape_aspect);
  WR3: SELF\shape_aspect_relationship.related_shape_aspect.
       of_shape\property_definition.
       definition\product_definition.
       frame_of_reference\application_context_element.
       name = 'physical occurrence';
END_ENTITY;
(*

Formal propositions:

WR1: The relating_shape_aspect of a line_plant_item_connection shall be a plant_line_segment_-
termination.

WR2: The related_shape_aspect of a line_plant_item_connection shall be a plant_item_connector.

WR3: The product_definition that the related_shape_aspect of a line_plant_item_connection is
related to shall have a context with the name `physical occurrence'.

5.2.3.1.36  line_termination_connection

A line_termination_connection is a type of shape_aspect_relationship that identifies a connection
between two line segment terminations, or between a line segment termination and a connection node.

EXPRESS specification:

*)
ENTITY line_termination_connection
  SUBTYPE OF (shape_aspect_relationship);
WHERE
  WR1: SIZEOF (TYPEOF (SELF.relating_shape_aspect) *
       ['PLANT_SPATIAL_CONFIGURATION.CONNECTION_NODE',
       'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION']
       ) >= 1;
  WR2: 'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION'
       IN TYPEOF (SELF.related_shape_aspect);
END_ENTITY;
(*

Formal propositions:

WR1: The relating_shape_aspect of a line_termination_connection shall be a connection_node or
a plant_line_segment_termination.

WR2: The related_shape_aspect of a line_termination_connection shall be a plant_line_segment_-
termination.

5.2.3.1.37  pipe_classification

A pipe_classification is a type of group that classifies the items are assigned to it as pipes.  The name
of the pipe_classification may further classify the assigned items.

EXPRESS specification:

*)
ENTITY pipe_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'pipe'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A pipe_classification shall classify items of type piping_component_definition.

WR2: A pipe_classification shall classify items of type piping_component_definition that are a
definition of a product that is categorized as a `pipe'.

5.2.3.1.38  pipe_closure_fitting_classification

A pipe_closure_fitting_classification is a type of group that classifies the items that are assigned to
it as pipe closure fittings.  The name of the pipe_closure_fitting_classification may further classify
the assigned items.

EXPRESS specification:

*)
ENTITY pipe_closure_fitting_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'pipe closure'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A pipe_closure_fitting_classification shall classify items of type piping_component_-
definition.

WR2: A pipe_closure_fitting_classification shall classify items of type piping_component_-
definition that are a definition of a product that is categorized as a `pipe closure'.

5.2.3.1.39  piping_component_class

A piping_component_class is a type of product_category that is a characterized_object representing
a family of piping components defined by parameter range values.

EXPRESS specification:

*)
ENTITY piping_component_class
  SUBTYPE OF (product_category, characterized_object);
END_ENTITY;
(*

5.2.3.1.40  piping_component_definition

A piping_component_definition is a type of product_definition that defines a piping component.

EXPRESS specification:

*)
ENTITY piping_component_definition
  SUBTYPE OF (product_definition);
END_ENTITY;
(*

5.2.3.1.41  piping_connector_classification

A piping_connector_classification is a type of group that classifies the items that are assigned to it
as being piping connectors.

EXPRESS specification:

*)
ENTITY piping_connector_classification
  SUBTYPE OF (group);
END_ENTITY;
(*

ýÄE8U  piping_design_csg_shape_representation

A piping_design_csg_shape_representation is a type of shape_representation that is composed of
CSG primitives and boolean operators and is used to represent the shape of the piping design.

EXPRESS specification:

*)
ENTITY piping_design_csg_shape_representation
  SUBTYPE OF (shape_representation);
WHERE
  WR1: SIZEOF (QUERY (i <* SELF\representation.items |
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.BOOLEAN_RESULT',
       'PLANT_SPATIAL_CONFIGURATION.CSG_SOLID',
       'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D',
       'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM'] *
       TYPEOF(i)) = 1))) = 0;
  WR2: SIZEOF (QUERY (mi <* QUERY (item <* SELF\representation.items |
       'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' IN TYPEOF(item)) |
       NOT ('PLANT_SPATIAL_CONFIGURATION.' +
       'PIPING_DESIGN_CSG_SHAPE_REPRESENTATION' IN
       TYPEOF (mi\mapped_item.mapping_source.mapped_representation)))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A piping_design_csg_shape_representation shall consist only of representation_items that
are  boolean_result, csg_solid, axis2_placement_3d, or mapped_item. 

WR2: If there is a mapped_item in a piping_design_csg_shape_representation, the source of the
mapped_item shall be a piping_design_csg_shape_representation.

5.2.3.1.43  piping_system

A piping_system is a type of product_definition that identifies a system of interconnected objects
that convey fluid, vapour, or particulate flow.

EXPRESS specification:

*)
ENTITY piping_system
  SUBTYPE OF (product_definition);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       ('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF
       (pdr.relating_product_definition.formation.of_product)) AND
       (pdr.relating_product_definition.frame_of_reference.name =
       'functional occurrence'))) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: The piping_system shall be related to exactly one product_definition that is the definition of
a plant and has a context of `functional occurrence'.

5.2.3.1.44  plant

A plant is a type of product that identifies a process plant facility.

EXPRESS specification:

*)
ENTITY plant
  SUBTYPE OF (product);
WHERE
  WR1: SIZEOF (QUERY (pscoa <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.'+
       'PLANT_SPATIAL_CONFIGURATION_ORGANIZATION_ASSIGNMENT.ITEMS')  |
       pscoa.role.name =
       'plant operator')) +
       SIZEOF (QUERY (pscpaoa <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.'+
       'PLANT_SPATIAL_CONFIGURATION_PERSON_AND_ORGANIZATION_ASSIGNMENT.' +
       'ITEMS') | 
       pscpaoa.role.name =
       'plant operator')) <= 1;
  WR2: SIZEOF (QUERY (pscoa <* USEDIN(SELF,
       'PLANT_SPATIAL_CONFIGURATION.'+
       'PLANT_SPATIAL_CONFIGURATION_ORGANIZATION_ASSIGNMENT.ITEMS') |
       pscoa.role.name = 'plant owner')) +
       SIZEOF (QUERY (pscpaoa <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.'+
       'PLANT_SPATIAL_CONFIGURATION_PERSON_AND_ORGANIZATION_ASSIGNMENT.' +
       'ITEMS') | 
       pscpaoa.role.name =
       'plant owner')) +
       SIZEOF (QUERY (pscpa <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.'+
       'PLANT_SPATIAL_CONFIGURATION_PERSON_ASSIGNMENT.ITEMS') |
       pscpa.role.name = 'plant owner')) >= 1;
  WR3: SIZEOF (QUERY (pscoa <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.'+
       'PLANT_SPATIAL_CONFIGURATION_ORGANIZATION_ASSIGNMENT.ITEMS')  |
       pscoa\organization_assignment.role.name = 
       'plant project owner')) +
        SIZEOF (QUERY (pscpaoa <* USEDIN (SELF,
        'PLANT_SPATIAL_CONFIGURATION.'+
        'PLANT_SPATIAL_CONFIGURATION_PERSON_AND_ORGANIZATION_ASSIGNMENT.' +
        'ITEMS') | 
        pscpaoa\person_and_organization_assignment.role.name =
        'plant project owner')) >= 1;
  WR4:  SIZEOF (QUERY (pdf <* USEDIN (SELF, 
        'PLANT_SPATIAL_CONFIGURATION.' +
        'PRODUCT_DEFINITION_FORMATION.OF_PRODUCT') |
        NOT (SIZEOF (QUERY (pd <* USEDIN (pdf,
        'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION.FORMATION') |
        pd.frame_of_reference.name = 'functional occurrence')) <= 1))) = 0;
  WR5: SIZEOF (QUERY (pdf <* USEDIN (SELF, 
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_FORMATION.OF_PRODUCT') |
       NOT (SIZEOF (QUERY (prod_def <* USEDIN (pdf,
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION.FORMATION') | 
       SIZEOF (QUERY (pd <* USEDIN (prod_def,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       SIZEOF (QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       SIZEOF (QUERY (it <* pdr.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_2D',
       'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D']) = 1) AND
       (it.name = 
       'plant placement reference'))) >= 1)) >= 1)) >= 1)) = 1))) = 0;      

END_ENTITY;
(*

Formal propositions:

WR1: A plant is associated with zero or one person_and_organization or organization in the role
of plant operator.

WR2: A plant is associated with at least one organization, person_and_organization, or person in
the role of plant owner.

WR3: A plant is associated with at least one person_and_organization or organization in the role
of plant project owner.

WR4: A plant shall be related to at most one product_definition that has a context of `functional
occurrence'.

WR5: A plant shall have definitions that have at least one representation with at least one item that
is either an axis2_placement_2d or an axis2_placement_3d with the name of `plant placement
reference'.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_context (see 5.2.4.10);

    þ product_context_discipline_type_constraint (see 5.2.4.12).

5.2.3.1.45  plant_item_connection

A plant_item_connection is a type of shape_aspect and shape_aspect_relationship that identifies
a connection between plant items.

      NOTE - A connection is a shape_aspect of the physical assembly where the two plant items are
      connected.

EXPRESS specification:

*)
ENTITY plant_item_connection
  SUBTYPE OF(shape_aspect, shape_aspect_relationship);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN
       TYPEOF (SELF\shape_aspect_relationship.relating_shape_aspect);
  WR2: 'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN
       TYPEOF (SELF\shape_aspect_relationship.related_shape_aspect);
  WR3: SELF\shape_aspect.of_shape\property_definition.
       definition\product_definition.
       frame_of_reference\application_context_element.name IN
       ['functional occurrence', 'physical occurrence',
       'functional definition', 'physical definition'];
  WR4: (SELF\shape_aspect_relationship.relating_shape_aspect.
       of_shape\property_definition.definition\product_definition.
       frame_of_reference\application_context_element.name =
       SELF\shape_aspect_relationship.related_shape_aspect.
       of_shape\property_definition.definition\product_definition.
       frame_of_reference\application_context_element.name);
  WR5: SIZEOF (USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'CLASSIFICATION_ASSIGNMENT.ITEMS')) > 0;
  WR6: SIZEOF (QUERY (pscca <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       NOT (SIZEOF (
       ['PLANT_SPATIAL_CONFIGURATION.CONNECTION_FUNCTIONAL_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTION_MOTION_CLASSIFICATION'] *
       TYPEOF (pscca.assigned_group)) >= 1))) = 0;
  WR7: SIZEOF (QUERY (pdr <* USEDIN (SELF.of_shape.definition,
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_RELATIONSHIP.' +
       'RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'support usage connection')) <= 1;
END_ENTITY;
(*

Formal propositions:

WR1: The relating_shape_aspect of a plant_item_connection shall be a plant_item_connector.

WR2: The related_shape_aspect of a plant_item_connection shall be a plant_item_connector.

WR3: The application_context_element that applies to a plant_item_connection shall have the name
`functional occurrence', `physical occurrence', `functional definition', or `physical definition'.

WR4: The application_context_elements that apply to the relating_shape_aspect and the related_-
shape_aspect of a plant_item_connection shall have the same name.

WR5: A plant_item_connection shall be classified at least once.

WR6: A plant_item_connection shall be classified as a connection_functional_classification, as a
connection_motion_classification, or as both.

WR7: The product_definition of the plant_item_connection shall be the related product_definition
in at most one product_definition_relationship with a name of `support usage connection'.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_item_connection
entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13);

    þ product_definition_usage_constraint (see 5.2.4.14).

5.2.3.1.46  plant_item_connector

A plant_item_connector is a type of shape_aspect that identifies a feature of a plant item that is
designed to connect to another connector.

EXPRESS specification:

*)
ENTITY plant_item_connector
  SUBTYPE OF(shape_aspect);
WHERE
  WR1: SELF\shape_aspect.of_shape\property_definition.
       definition\product_definition.
       frame_of_reference\application_context_element.name IN
       ['functional definition', 'physical definition',
       'functional occurrence', 'physical occurrence'];
  WR2: SIZEOF (QUERY (pic <* 
       (bag_to_set (USEDIN (SELF,'PLANT_SPATIAL_CONFIGURATION.' + 
       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) + 
       bag_to_set (USEDIN (SELF,'PLANT_SPATIAL_CONFIGURATION.' + 
       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT'))) |
       'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTION' IN
       TYPEOF (pic))) <= 1;
  WR3: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 
       'design service characteristics')) = 1))) = 0));
(*
  WR4: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       (SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1) )) >= 1)) OR
       (NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       (pd.name = 'service characteristics') )) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       (pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       (pdr.used_representation.name = 'design service characteristics') |
       SIZEOF (dsc.used_representation.items) >= 2) )) = 1)) )) = 0);
*)
  WR5: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       {1 <= SIZEOF (QUERY (it <* dsc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name IN ['pressure', 'minimum pressure', 
       'maximum pressure']))) <= 2})) = 1))) = 0));
  WR6: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       SIZEOF (QUERY (it <* dsc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'pressure'))) <= 1)) = 1))) = 0));
  WR7: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       SIZEOF (QUERY (it <* dsc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'minimum pressure'))) <= 1)) = 1))) = 0));
  WR8: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       SIZEOF (QUERY (it <* dsc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'maximum pressure'))) <= 1)) = 1))) = 0));
  WR9: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       {1 <= SIZEOF (QUERY (it <* dsc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name IN ['temperature', 'minimum temperature', 
       'maximum temperature']))) <= 2})) = 1))) = 0));
 WR10: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       SIZEOF (QUERY (it <* dsc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'temperature'))) <= 1)) = 1))) = 0));
 WR11: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       SIZEOF (QUERY (it <* dsc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'minimum temperature'))) <= 1)) = 1))) = 0));
 WR12: (NOT (SIZEOF (QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.ITEMS') |
       SIZEOF (TYPEOF (ga.assigned_group) *
       ['PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASSIFICATION',
       'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASSIFICATION'])
       = 1)) >= 1)) OR
       ((NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       pd.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (dsc <* QUERY (pdr <* USEDIN (sc,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'design service characteristics') |
       SIZEOF (QUERY (it <* dsc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'maximum temperature'))) <= 1)) = 1))) = 0));
END_ENTITY;
(*

Formal propositions:

WR1: The application_context_element that applies to a plant_item_connector (as its product_-
definition_context) shall have the name `functional definition', `physical definition' `functional
occurrence', or `physical occurrence'.

WR2: The plant_item_connector shall be the connector in at most one plant_item_connection.

WR3: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with the name of `design service characteristics'.

WR4: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has at least two
representation_items.

WR5: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has one or two
representation_items of type measure_representation_item with a name of `pressure', `minimum
pressure', or `maximum pressure'.

WR6: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has at most one
representation_item of type measure_representation_item with a name of `pressure'.

WR7: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has at most one
representation_item of type measure_representation_item with a name of `minimum pressure'.

WR8: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has at most one
representation_item of type measure_representation_item with a name of `maximum pressure'.

WR9: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has one or two
representation_items of type measure_representation_item and thermodynamic_temperature_-
measure_with_unit with a name of `temperature', `minimum temperature', or `maximum
temperature'.

WR10: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has at most one
representation_item of type measure_representation_item and thermodynamic_temperature_-
measure_with_unit with a name of `temperature'.

WR11: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has at most one
representation_item of type measure_representation_item and thermodynamic_temperature_-
measure_with_unit with a name of `minimum temperature'.

WR12: If the plant_item_connector is classified as either a piping connector or a connector end type
and has a property_definition with a name of `service characteristics', the property_definition shall
have exactly one representation with a name of `design service characteristics' that has at most one
representation_item of type measure_representation_item and thermodynamic_temperature_-
measure_with_unit with a name of `maximum temperature'.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_item_connector
entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13);

    þ product_definition_usage_constraint (see 5.2.4.14).

5.2.3.1.47  plant_item_interference

A plant_item_interference is a type of product_definition_relationship that identifies interference
between plant items.

EXPRESS specification:

*)
ENTITY plant_item_interference
  SUBTYPE OF (product_definition_relationship);
END_ENTITY;
(*

5.2.3.1.48  plant_item_route

A plant_item_route is a type of product_definition_shape that identifies the 3D path of a plant_-
line_definition or a plant_line_segment_definition.

EXPRESS specification:

*)
ENTITY plant_item_route
  SUBTYPE OF (product_definition_shape);
WHERE
  WR1: SELF\property_definition.definition\product_definition.
       frame_of_reference\application_context_element.name =
       'physical occurrence';
  WR2: SIZEOF (TYPEOF (SELF\property_definition.definition) *
       ['PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_DEFINITION',
       'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION']) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: The name of the product_definition_context that a plant_item_route is related to shall be
`physical occurrence'.

WR2: A plant_item_route shall be the definition of the shape of a plant_line_definition or a plant_-
line_segment_definition.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_item_route entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13);

    þ product_definition_usage_constraint (see 5.2.4.14).

5.2.3.1.49  plant_item_weight_representation

A plant_item_weight_representation is a type of property_definition_representation that specifies
the weight of plant items.

EXPRESS specification:

*)
ENTITY plant_item_weight_representation
  SUBTYPE OF (property_definition_representation);
WHERE
  WR1: SELF.used_representation.name = 'item weight';
  WR2: SIZEOF (SELF.used_representation.items) >= 2;
  WR3: SIZEOF (QUERY (it <* SELF.used_representation.items |
       (it.name IN ['weight value', 'mass value', 
       'maximum weight value', 'minimum weight value', 
       'maximum mass value', 'minimum mass value']) AND       
       (NOT (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.QUALIFIED_REPRESENTATION_ITEM']) = 
       2)))) = 0;
  WR4: SIZEOF (QUERY (it <* SELF.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_ITEM'
       IN TYPEOF (it)) AND
       (it.name = 'centre of gravity'))) = 1;
  WR5: {1 <= SIZEOF (QUERY (it <* SELF.used_representation.items |
       it.name IN ['weight value', 'mass value', 
       'maximum weight value', 'minimum weight value', 
       'maximum mass value', 'minimum mass value'])) <= 2};
  WR6: SIZEOF (QUERY (it <* SELF\property_definition_representation.
       used_representation.items |
       (it.name IN ['maximum weight value', 'minimum weight value', 
       'maximum mass value', 'minimum mass value']) AND       
       (NOT (SIZEOF (QUERY (tq <* QUERY (qual <*
       it\qualified_representation_item.qualifiers |
       'PLANT_SPATIAL_CONFIGURATION.TYPE_QUALIFIER' IN TYPEOF (qual)) |
       tq.name = 'operating')) = 1)))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: The name of the plant_item_weight_representation shall be `item weight'.

WR2: The plant_item_weight_representation shall contain at least two items.

WR3: If the plant_item_weight_representation contains a representation_item with a name of
`weight value', `mass value', `maximum weight value', `minimum weight value', `maximum mass
value', or `minimum mass value', the representation_item shall be a measure_representation_item
and a qualified_representation_item.

WR4: The plant_item_weight_representation shall contain exactly one representation_item that is
a geometric_representation_item with a name of `centre of gravity'.

WR5: The plant_item_weight_representation shall have between 1 and 2 representation_items with
a name of `weight value',`mass value, `maximum weight value', `minimum weight value', `maximum
mass value', or `minimum mass value'.

WR6: If the plant_item_weight_representation has a representation_item with a name of
`maximum weight value', `minimum weight value', `maximum mass value', or `minimum mass value',
the representation_item shall have a type_qualifier with a name of `operating'.

5.2.3.1.50  plant_line_definition

A plant_line_definition is a type of product_definition_with_associated_documents that identifies
a piping system line.

EXPRESS specification:

*)
ENTITY plant_line_definition
  SUBTYPE OF (product_definition_with_associated_documents);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       ('PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM' IN
       TYPEOF (pdr.relating_product_definition)))) = 1;
  WR2: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION' IN
       TYPEOF (pdr.related_product_definition))) >= 1;
  WR3: (NOT (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       SIZEOF (USEDIN (pd, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) >= 1)) = 0))  OR
       (SIZEOF (QUERY (pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       SIZEOF (QUERY (rep <* 
       USEDIN (pdr.used_representation.context_of_items,
       'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION.CONTEXT_OF_ITEMS') |
       SIZEOF (QUERY (prop_def_rep <* USEDIN (rep,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |
       (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.SITE',
       'PLANT_SPATIAL_CONFIGURATION.SITE_BUILDING'] *
       TYPEOF (prop_def_rep.definition)) = 1) OR
       ('PLANT_SPATIAL_CONFIGURATION.PLANT' IN
       TYPEOF (prop_def_rep.definition.definition.formation.of_product))))
       >= 1)) >= 1)) >= 1))) = 0);
  WR4: SELF.frame_of_reference.name =
       'functional definition';
END_ENTITY;
(*

Formal propositions:

WR1: A plant_line_definition shall be related to exactly one piping_system.

WR2: A plant_line_definition shall be related to at least one plant_line_segment_definition.

WR3: If a plant_line_definition has a representation, that representation shall be in the context of
a site_building, a site, or a plant.

WR4: A plant_line_definition shall have an application_context_element.name of `functional
definition'.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_line_definition entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13).

5.2.3.1.51  plant_line_segment_definition

A plant_line_segment_definition is a type of product_definition that identifies a line segment.

EXPRESS specification:

*)
ENTITY plant_line_segment_definition
  SUBTYPE OF (product_definition);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_DEFINITION'
       IN TYPEOF (pdr.relating_product_definition))) >= 1;
  WR2: SIZEOF (QUERY( pd <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.SHAPE_DEFINITION' IN 
       TYPEOF (pd))) >= 1;
  WR3: SELF.frame_of_reference\application_context_element.name =
       'functional definition';
  WR4: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'line segment characteristics')) = 1;
  WR5: SIZEOF (QUERY (lsc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'line segment characteristics') |
       NOT (SIZEOF (lsc.used_representation.items) >= 2))) = 0;
  WR6: SIZEOF (QUERY (lsc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'line segment characteristics') |
       NOT (SIZEOF (QUERY (it <* lsc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'design pressure'))) = 1))) = 0;
  WR7: SIZEOF (QUERY (lsc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'line segment characteristics') |
       NOT (SIZEOF (QUERY (it <* lsc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' + 
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'design temperature'))) = 1))) = 0;
  WR8: SIZEOF (QUERY (lsc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'line segment characteristics') |
       NOT (SIZEOF (QUERY (it <* lsc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'elevation'))) <= 1))) = 0;
  WR9: SIZEOF (QUERY (lsc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'line segment characteristics') |
       NOT (SIZEOF (QUERY (it <* lsc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'corrosion allowance'))) <= 1))) = 0;
 WR10: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation')) >= 1)) OR
       (SIZEOF (QUERY (si <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation') |
       NOT (SIZEOF (QUERY (pd <* USEDIN (si,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (pds <* QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
       TYPEOF (pdr)) |
       pds.used_representation.name = 
       'segment insulation characteristics')) = 1))) = 0))) = 0);
 (*
 WR11: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation')) >= 1)) OR
       (SIZEOF (QUERY (si <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation') |
       NOT (SIZEOF (QUERY (pd <* USEDIN (si,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN
       TYPEOF (pdr)) |
       pds.used_representation.name = |
       'segment insulation characteristics') |
       SIZEOF (sic.used_representation.items) >= 1)) = 1))) = 0))) = 0);
 
 WR12: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation')) >= 1)) OR
       (SIZEOF (QUERY (si <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation') |
       NOT (SIZEOF (QUERY (pd <* USEDIN (si,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN
       TYPEOF (pdr)) |
       pds.used_representation.name = |
       'segment insulation characteristics') |
       {1 <= SIZEOF (QUERY (it <* sic.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT']) = 2) AND
       (it.name IN ['thickness', 'minimum thickness', 
       'maximum thickness']))) <= 2})) = 1))) = 0))) = 0);
 WR13: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation')) >= 1)) OR
       (SIZEOF (QUERY (si <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation') |
       NOT (SIZEOF (QUERY (pd <* USEDIN (si,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN
       TYPEOF (pdr)) |
       pds.used_representation.name = |
       'segment insulation characteristics') |
       SIZEOF (QUERY (it <* sic.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'thickness'))) <= 1)) = 1))) = 0))) = 0);
 WR14: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation')) >= 1)) OR
       (SIZEOF (QUERY (si <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation') |
       NOT (SIZEOF (QUERY (pd <* USEDIN (si,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN
       TYPEOF (pdr)) |
       pds.used_representation.name = |
       'segment insulation characteristics') |
       SIZEOF (QUERY (it <* sic.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'minimum thickness'))) <= 1)) = 1))) = 0))) = 0);
 WR15: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation')) >= 1)) OR
       (SIZEOF (QUERY (si <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation') |
       NOT (SIZEOF (QUERY (pd <* USEDIN (si,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN
       TYPEOF (pdr)) |
       pds.used_representation.name = |
       'segment insulation characteristics') |
       SIZEOF (QUERY (it <* sic.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'maximum thickness'))) <= 1)) = 1))) = 0))) = 0);
 WR16: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation')) >= 1)) OR
       (SIZEOF (QUERY (si <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       pdr.name = 'segment insulation') |
       NOT (SIZEOF (QUERY (pd <* USEDIN (si,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN
       TYPEOF (pdr)) |
       pds.used_representation.name = |
       'segment insulation characteristics') |
       SIZEOF (QUERY (it <* sic.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'boundaries'))) <= 1)) = 1))) = 0))) = 0);
*)
END_ENTITY;
(*

Formal propositions:

WR1: A plant_line_segment_definition shall be the related_product_definition in a product_-
definition_relationship that has a relating_product_definition that is a plant_line_definition.

WR2: A plant_line_segment_definition shall be referenced by a shape_definition.

WR3: A plant_line_segment_definition shall have a frame_of_reference name of `functional
definition'.

WR4: A plant_line_segment_definition shall have exactly one representation with the name of `line
segment characteristics'.

WR5: The representation of the plant_line_segment_definition with the name of `line segment
characteristics' shall have at least two representation_items.

WR6: The representation of the plant_line_segment_definition with the name of `line segment
characteristics' shall have exactly one representation_item that is of type measure_representation_-
item with a name of `design pressure'. 

WR7: The representation of the plant_line_segment_definition with the name of `line segment
characteristics' shall have exactly one representation_item that is of type measure_representation_-
item and thermodynamic_temperature_measure_with_unit with a name of `design temperature'. 

WR8: The representation of the plant_line_segment_definition with the name of `line segment
characteristics' shall have at most one representation_item that is of type measure_representation_-
item and length_measure_with_unit with a name of `elevation'. 

WR9: The representation of the plant_line_segment_definition with the name of `line segment
characteristics' shall have at most one representation_item that is of type measure_representation_-
item with a name of `corrosion allowance'. 

WR10: If the plant_line_segment_definition is related to a product_definition  as a 'segment
insulation', the product_definition shall have a product_definition_shape that has exactly one
representation with the name of `segment insulation characteristics'.

WR11: If the plant_line_segment_definition is related to a product_definition as a 'segment
insulation', the product_definition shall have a product_definition_shape that has exactly one
representation with the name of `segment insulation characteristics' that has at least one
representation_item.

WR12: If the plant_line_segment_definition is related to a product_definition as a 'segment
insulation', the product_definition shall have a product_definition_shape that has exactly one
representation with the name of `segment insulation characteristics' that has one or two
representation_items of type measure_representation_item and length_measure_with_unit with
a name of `thickness', `minimum thickness', or `maximum thickness'.

WR13: If the plant_line_segment_definition is related to a product_definition as a 'segment
insulation', the product_definition shall have a product_definition_shape that has exactly one
representation with the name of `segment insulation characteristics' that has at most one
representation_item items of type measure_representation_item and length_measure_with_unit
with a name of `thickness'.

WR14: If the plant_line_segment_definition is related to a product_definition as a 'segment
insulation', the product_definition shall have a product_definition_shape that has exactly one
representation with the name of `segment insulation characteristics' that has at most one
representation_item items of type measure_representation_item and length_measure_with_unit
with a name of `minimum thickness'.

WR15: If the plant_line_segment_definition is related to a product_definition as a 'segment
insulation', the product_definition shall have a product_definition_shape that has exactly one
representation with the name of `segment insulation characteristics' that has at most one
representation_item items of type measure_representation_item and length_measure_with_unit
with a name of `maximum thickness'.

WR16: If the plant_line_segment_definition is related to a product_definition as a 'segment
insulation', the product_definition shall have a product_definition_shape that has exactly one
representation with the name of `segment insulation characteristics' that has at most one
representation_item items of type descriptive_representation_item with a name of `boundaries'.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_line_segment_-
definition entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13).

5.2.3.1.52  plant_line_segment_termination

A plant_line_segment_termination is a type of shape_aspect that identifies the termination of a line
segment.

EXPRESS specification:

*)
ENTITY plant_line_segment_termination
  SUBTYPE OF (shape_aspect);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION'
       IN TYPEOF (SELF.of_shape.definition);
  WR2: SIZEOF (QUERY (sar <*
       USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') +
       USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |
       NOT (SIZEOF (TYPEOF (sar) *
       ['PLANT_SPATIAL_CONFIGURATION.LINE_BRANCH_CONNECTION',
       'PLANT_SPATIAL_CONFIGURATION.LINE_PLANT_ITEM_CONNECTION',
       'PLANT_SPATIAL_CONFIGURATION.LINE_TERMINATION_CONNECTION'])
       = 1))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A plant_line_segment_termination is an aspect of the shape of a plant_line_segment_-
definition.

WR2: A plant_line_segment_termination is the relating_shape_aspect or the related_shape_aspect
in at least one shape_aspect_relationship that is a line_branch_connection, line_plant_item_-
connection, or line_termination_connection.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_line_segment_-
termination entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13).

5.2.3.1.53  plant_spatial_configuration_action_request_assignment

A plant_spatial_configuration_action_request_assignment assigns an action_request to a set of one
or more products.

*)
ENTITY plant_spatial_configuration_action_request_assignment
  SUBTYPE OF (action_request_assignment);
  items : SET [1:?] OF plant_spatial_configuration_action_request_item;
END_ENTITY;
(*

Attribute definitions:

items: the set of products that an action_request is assigned to.

5.2.3.1.54  plant_spatial_configuration_approval_assignment

A plant_spatial_configuration_approval_assignment assigns an approval to a set of one or more
change_actions.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_approval_assignment
  SUBTYPE OF (approval_assignment);
  items : SET [1:?] OF approval_item;
END_ENTITY;
(*

Attribute definitions:

items: the set of change_actions and versioned_action_requests that an approval is assigned to.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the plant_spatial_-
configuration_approval_assignment entity:

    þ change_life_cycle_stage_usage_requires_approval (see 5.2.4.7).

5.2.3.1.55  plant_spatial_configuration_change_assignment

A plant_spatial_configuration_change_assignment assigns a change_action to a set of one or more
change_items.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_change_assignment
  SUBTYPE OF (action_assignment);
  items : SET [1:?] OF change_item;
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.CHANGE_ACTION'
       IN TYPEOF (SELF.assigned_action);
END_ENTITY;
(*

Attribute definitions:

items: the set of change_items that an action is assigned to.

Formal propositions:

WR1: The assigned action shall be a change_action.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_spatial_-
configuration_change_assignment entity:

    þ change_item_requires_creation_date (see 5.2.4.5);

    þ change_item_requires_id (see 5.2.4.6).

5.2.3.1.56  plant_spatial_configuration_date_and_time_assignment

A plant_spatial_configuration_date_and_time_assignment assigns a date_and_time to a set of one
or more products.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_date_and_time_assignment
  SUBTYPE OF (date_and_time_assignment);
  items : SET [1:?] OF plant_spatial_configuration_date_and_time_item;
END_ENTITY;
(*

Attribute definitions:

items: the set of products that a date_and_time is assigned to.

5.2.3.1.57  plant_spatial_configuration_date_assignment

A plant_spatial_configuration_date_assignment assigns a date to a set of one or more action_-
directives, change_actions, change_items, and products.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_date_assignment
  SUBTYPE OF (date_assignment);
  items : SET [1:?] OF plant_spatial_configuration_dated_item;
END_ENTITY;
(*

Attribute definitions:

items: the set of action_directives, change_actions, change_items, and products that a date is
assigned to.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the plant_spatial_-
configuration_date_assignment entity:

    þ change_action_requires_date (see 5.2.4.4);

    þ change_item_requires_creation_date (see 5.2.4.5).

5.2.3.1.58  plant_spatial_configuration_document_reference

A plant_spatial_configuration_document_reference assigns a document to a set of one or more
heat_tracing_representations, piping_component_classes, piping_systems, plant_item_connectors,
plant_line_segment_definitions, products, product_definitions, product_definition_relationships,
property_definitions, representations, representation_items, and sites.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_document_reference
  SUBTYPE OF (document_reference);
  items : SET [1:?] OF plant_spatial_configuration_document_item;
END_ENTITY;
(*

Attribute definitions:

items: the set of heat_tracing_representations, piping_component_classes, piping_systems, plant_-
item_connectors, plant_line_segment_definitions, products, product_definitions, product_-
definition_relationships, property_definitions, representations, representation_items, and sites that
is associated with a document.

5.2.3.1.59  plant_spatial_configuration_organization_assignment

A plant_spatial_configuration_organization_assignment assigns an organization to a set of one or
more catalogues, change_actions, design_projects, documents, plants, product_definition_-
formations, product_definition_relationships, and sites.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_organization_assignment
  SUBTYPE OF (organization_assignment);
  items : SET [1:?] OF plant_spatial_configuration_organization_item;
WHERE
  WR1: plant_spatial_configuration_organization_correlation (SELF);
END_ENTITY;
(*

Attribute definitions:

items: the set of catalogues, change_actions, design_projects, documents, plants, product_-
definition_formations, product_definition_relationships, and sites that an organization is assigned
to.

Formal propositions:

WR1: The plant_spatial_configuration_organization_correlation function that correlates roles of
organizations to elements of product data shall be satisfied.

5.2.3.1.60  plant_spatial_configuration_person_and_organization_assignment

A plant_spatial_configuration_person_and_organization_assignment assigns a person_and_-
organization to a set of one or more change_items, plants, and sites.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_person_and_organization_assignment
  SUBTYPE OF (person_and_organization_assignment);
  items : SET [1:?] OF 
          plant_spatial_configuration_person_and_organization_item;
WHERE
  WR1: plant_spatial_configuration_person_and_organization_correlation
       (SELF);
END_ENTITY;
(*

Attribute definitions:

items: the set of change_items, plants, and sites that a person_and_organization is assigned to.

Formal propositions:

WR1: The plant_spatial_configuration_person_and_organization_correlation function that
correlates roles of persons and organizations to elements of product data shall be satisfied.

5.2.3.1.61  plant_spatial_configuration_person_assignment

A plant_spatial_configuration_person_assignment assigns a person to a set of one or more
documents, plants, product_definition_relationships, and sites.

EXPRESS specification:

*)
ENTITY plant_spatial_configuration_person_assignment
  SUBTYPE OF (person_assignment);
  items : SET [1:?] OF plant_spatial_configuration_person_item;
WHERE
  WR1: plant_spatial_configuration_person_correlation (SELF);
END_ENTITY;
(*

Attribute definitions:

items: the set of documents, plants, product_definition_relationships, and sites that a person is
assigned to.

Formal propositions:

WR1: The plant_spatial_configuration_person_correlation function that correlates roles of persons
to elements of product data shall be satisfied.

5.2.3.1.62  process_capability

A process_capability is a type of property_definition that identifies the physical or chemical process
that is, or is intended to be, carried out by a plant.

EXPRESS specification:

*)
ENTITY process_capability
  SUBTYPE OF (property_definition);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.PLANT' IN
       TYPEOF(SELF.definition\product_definition.formation.of_product);
  WR2: SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION_REPRESENTATION.' +
       'DEFINITION') |
       (pdr.used_representation.name = 'production capacity') AND
       (NOT (SIZEOF (QUERY (it <* pdr.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM'
       IN TYPEOF (it)) AND 
       (it.name = 'production type'))) = 1)))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A process_capability is a property of a plant.

WR2: The representation instances associated with a process_capability shall have a name of
`production capacity' and shall contain exactly one descriptive_representation_item with a name of
`production type'.

5.2.3.1.63  purchase_assignment

A purchase_assignment assigns a set of one or more products to an action to identify that the
product is purchased.

EXPRESS specification:

*)
ENTITY purchase_assignment
  SUBTYPE OF (action_assignment);
  items : SET [1:?] OF purchase_item;
END_ENTITY;
(*

Attribute definitions:

items: the set of products that are purchased.

5.2.3  w  reducer_fitting_classification

A reducer_fitting_classification is a type of group that classifies the items that are assigned to it as
reducer fittings.

EXPRESS specification:

*)
ENTITY reducer_fitting_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'reducer'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A reducer_fitting_classification shall classify items of type piping_component_definition.

WR2: A reducer_fitting_classification shall classify items of type piping_component_definition that
are a definition of a product that is categorized as a `reducer'.

5.2.3.1.65  reference_geometry

A reference_geometry is a type of derived_shape_aspect that is a geometric element that is   
not part of the definition of the shape of plant_item, but is provided as supplementary geometric
information.  A reference_geometry has a  relationship to the shape definition geometry and may be
derivable from  shape geometry.

      EXAMPLE  - Centrelines of symmetric elements and origin points are considered reference_-
      geometry.

EXPRESS specification:

*)
ENTITY reference_geometry
  SUBTYPE OF (derived_shape_aspect);
WHERE
  WR1: SIZEOF (QUERY (pd <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (USEDIN (pd, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) >= 1))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: Each reference_geometry shall have at least one representations.

5.2.3.1.66  required_material_property

A required_material_property is a type of material_property that specifies the material or the
requirements for the material that a plant item should be made from.

*)
ENTITY required_material_property
  SUBTYPE OF (material_property);
WHERE
  WR1: (SIZEOF (TYPEOF (SELF\property_definition.definition) *
       ['PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR',
       'PLANT_SPATIAL_CONFIGURATION.' + 
       'EXTERNALLY_DEFINED_PLANT_ITEM']) = 1) OR
       (('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION' IN 
       TYPEOF (SELF.definition)) AND
       (SIZEOF (QUERY (pc <* SELF\property_definition.
       definition\product_definition.formation.of_product.
       frame_of_reference |
       pc.discipline_type = 'process plant')) = 1));
  WR2: SIZEOF (QUERY (ra <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION') |
       pdr.name = 'requirement allocation') |
       'PLANT_SPATIAL_CONFIGURATION.MATERIAL_PROPERTY' IN 
       TYPEOF (ra.relating_property_definition))) >= 1;
END_ENTITY;
(*

Formal propositions:

WR1: A required_material_property shall be a property of a plant_item_connector, externally_-
defined_plant_item, or a product_definition that defines a plant item.

WR2: A required_material_property shall be related to at least one material_property as the
`requirement allocation'.

5.2.3.1.67  reserved_space

A reserved_space is a type of shape_aspect that identifies a space that is reserved for a plant item.

*)
ENTITY reserved_space
  SUBTYPE OF (shape_aspect);
WHERE
  WR1: SELF\shape_aspect.of_shape\property_definition.
       definition\product_definition.
       frame_of_reference\application_context_element.name =
       'physical occurrence';
END_ENTITY;
(*

Formal propositions:

WR1: A reserved_space shall be an aspect of the definition of the shape of a product_definition
with a context with the name `physical occurrence'.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the reserved_space entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9);

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13);

    þ product_definition_usage_constraint (see 5.2.4.14).

5.2.3.1.68  site

A site is a type of characterized_object and property_definition that identifies the geographic and
topographic characteristics of the location of a plant.

EXPRESS specification:

*)
ENTITY site
  SUBTYPE OF (characterized_object, property_definition);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
       TYPEOF (SELF\property_definition.definition\product_definition.
       formation.of_product);
END_ENTITY;
(*

Formal propositions:

WR1: Each site shall be a property of a plant.

5.2.3.1.69  site_building

A site_building is a type of property_definition that identifies a partially or totally enclosed structure
located on a site.

EXPRESS specification:

*)
ENTITY site_building
  SUBTYPE OF (property_definition);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.SITE' IN
       TYPEOF (SELF.definition);
  WR2: SIZEOF (QUERY (pdr <* USEDIN (SELF, 
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       (pdr.used_representation.name = 'building number') AND
       (SIZEOF (QUERY (it <* pdr.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN
       TYPEOF (it)))) = 1))) = 1;
  WR3: SIZEOF (QUERY (pdr <* USEDIN (SELF, 
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       SIZEOF (QUERY (it <* pdr.used_representation.items |
       (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.AXIS_PLACEMENT_2D',
       'PLANT_SPATIAL_CONFIGURATION.AXIS_PLACEMENT_3D'] * 
       TYPEOF (it)) = 1) AND
       (it.name = 'building orientation') AND
       (it.location.name = 'building location'))) = 1)) <= 1; 
END_ENTITY;
(*

Formal propositions:

WR1: A site_building shall be a property of a site.

WR2: The site_building shall have exactly one representation with a name of 'building number' that
contains exactly one representation_item that is a descriptive_representation_item.

WR3:  The site_building shall have at most one representation that contains exactly one axis2_-
placement_2d or axis2_placement_3d with a name of `building orientation' and a location that has
a name of `building location'.

5.2.3.1.70  site_feature

A site_feature is a type of property_definition that identifies the composition, proportions,  form or
outward appearance of part of a site.

EXPRESS specification:

*)
ENTITY site_feature
  SUBTYPE OF (property_definition);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.SITE' IN
       TYPEOF(SELF.definition);
  WR2: SIZEOF (USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) = 3;
  WR3: SIZEOF (QUERY (pdr <* USEDIN (SELF, 
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       SIZEOF (QUERY (it <* pdr.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND   
       (it.name = 'site feature type'))) = 1)) = 1;
  WR4: SIZEOF (QUERY (pdr <* USEDIN (SELF, 
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       SIZEOF (QUERY (it <* pdr.used_representation.items |
       (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.AXIS_PLACEMENT_2D',
       'PLANT_SPATIAL_CONFIGURATION.AXIS_PLACEMENT_3D'] * 
       TYPEOF (it)) = 1) AND
       (it.name = 'feature orientation') AND
       (it.location.name = 'feature location'))) = 1)) = 1;
  WR5: SIZEOF (QUERY (pdr <* USEDIN (SELF, 
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       SIZEOF (QUERY (it <* pdr.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN
       TYPEOF (pdr.used_representation)) AND   
       (it.name = 'origin type') AND
       (it.description IN ['man made', 'natural']))) = 1)) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: A site_feature is a property of a site.

WR2: A site_feature is referenced by exactly three property_definition_representation instances.

WR3: A site_feature shall have exactly one representation  contains exactly one item of type
descriptive_representation_item with the name of `site feature type'.

WR4:  The site_feature shall have at exactly one representation that contains exactly one axis2_-
placement_2d or axis2_placement_3d with a name of `feature orientation' and a location that has
a name of `feature location'.

WR5: The site_feature shall have exactly one representation that contains exactly one
representation_item that is a descriptive_representation_item with the name of `origin type' and
a description of either `man made' or `natural'.

5.2.3.1.71  site_representation

A site_representation is a type of shape_representation that represents the shape properties of a site.

EXPRESS specification:

*)
ENTITY site_representation
  SUBTYPE OF(shape_representation);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF,'PLANT_SPATIAL_CONFIGURATION.'+
       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |
       NOT('PLANT_SPATIAL_CONFIGURATION.SITE' IN 
       TYPEOF (pdr.definition.definition)))) = 0;
  WR2: SIZEOF (QUERY (item <* SELF.items |
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.CONNECTED_FACE_SET',
       'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET'] *
       TYPEOF (item)) = 1))) = 1;
(*
  WR3: SIZEOF (QUERY (cfs <* QUERY (item <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.CONNECTED_FACE_SET' IN TYPEOF (item)) |
       NOT (SIZEOF (QUERY (fcs <* cfs\connected_face_set.cfs_faces |
       NOT (SIZEOF (QUERY (bnds <* fcs.bounds |
       NOT ('PLANT_SPATIAL_CONFIGURATION.POLY_LOOP' |
       IN TYPEOF (bnds.bound)))) 
       = 0))) = 0))) = 0;
*)
  WR4: SIZEOF (QUERY (cfs <* QUERY (item <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.CONNECTED_FACE_SET' IN TYPEOF (item)) |
       NOT (SIZEOF (QUERY (fcs <* cfs\connected_face_set.cfs_faces |
       NOT (SIZEOF (QUERY (bnds <* fcs.bounds |
       NOT (SIZEOF (bnds.bound\poly_loop.polygon) = 3))) 
       = 0))) = 0))) = 0;
(*
  WR5: SIZEOF (QUERY (gcs <* QUERY (item <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET' |
       IN TYPEOF (item)) |
       NOT (SIZEOF (QUERY (el <* gcs\geometric_set.elements |
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT',
       'PLANT_SPATIAL_CONFIGURATION.POLYLINE'] * TYPEOF (el)) 
       = 1))) = 0))) = 0;
  WR6: SIZEOF (QUERY (gcs <* QUERY (item <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET' |
       IN TYPEOF (item)) |
       NOT (SIZEOF (QUERY (el <* gcs\geometric_set.elements |
       'PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT' IN TYPEOF (el))) 
       >= 1))) = 0;

  WR7: SIZEOF (QUERY (gcs <* QUERY (item <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET' |
       IN TYPEOF (item)) |
       NOT (SIZEOF (QUERY (pline <* QUERY (el <* |
       gcs\geometric_set.elements |
       'PLANT_SPATIAL_CONFIGURATION.POLYLINE' IN TYPEOF (el)) |
       NOT (SIZEOF (QUERY (pline_pt <* pline\polyline.points |
       NOT (pline_pt IN gcs\geometric_set.elements))) = 0))) = 0))) = 0;
*)
END_ENTITY;
(*

Formal propositions:

WR1:  A site_representation shall be used to represent a site.

WR2:  A site_representation shall have in its set of items exactly one connected_face_set or
geometric_curve_set.

WR3:  If the representation_item is a connected_face_set, it shall contain faces that are bounded
by poly_loops.

WR4:  If the representation_item is a connected_face_set, all of its face instances shall be bounded
by poly_loops with topology defined by three cartesian_points.

WR5:  If the representation_item is a geometric_curve_set, its elements set shall consist of
cartesian_point or polyline.

WR6:  If the representation_item is a geometric_curve_set, its elements shall consist of at least one
cartesian_point.

WR7:  If the representation_item is a geometric_curve_set, its elements that are of type polyline
shall reference only points that are in the elements set.

5.2.3.1.72  spacer_fitting_classification

A spacer_fitting_classification is a type of group that classifies the items that are assigned to it as
spacer fittings.

EXPRESS specification:

*)
ENTITY spacer_fitting_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'spacer'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A spacer_fitting_classification shall classify items of type piping_component_definition.

WR2: A spacer_fitting_classification shall classify items of type piping_component_definition that
are a definition of a product that is categorized as a `spacer'.

5.2.3.1.73  specialty_item_classification

A specialty_item_classification is a type of group that classifies the items are assigned to it as
specialty items.  The name of the specialty_item_classification may further classify the assigned
items.

EXPRESS specification:

*)
ENTITY specialty_item_classification
  SUBTYPE OF (group);
END_ENTITY;
(*

5.2.3.1.74  stream_design_case

A stream_design_case is a type of property_definition and characterized_object that identifies the
characteristics of a gas, liquid, vapour, or particulate stream.

EXPRESS specification:

*)
ENTITY stream_design_case
  SUBTYPE OF (property_definition, characterized_object);
WHERE
  WR1: SIZEOF (QUERY (pd <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION.DEFINITION') |
       'PLANT_SPATIAL_CONFIGURATION.STREAM_PHASE' IN
       TYPEOF (pd))) >= 1;
  WR2: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics')) = 1;
  WR3: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (sfc.used_representation.items) >= 2))) = 0;
  WR4: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT ({1 <= SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name IN ['flow rate', 'minimum flow rate', 
       'maximum flow rate']))) <= 2}))) = 0;
  WR5: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'flow rate'))) <= 1))) = 0;
  WR6: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'minimum flow rate'))) <= 1))) = 0;
  WR7: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'maximum flow rate'))) <= 1))) = 0;
  WR8: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT ({1 <= SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name IN ['pressure', 'minimum pressure', 
       'maximum pressure']))) <= 2}))) = 0;
  WR9: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'pressure'))) <= 1))) = 0;
 WR10: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'minimum pressure'))) <= 1))) = 0;
 WR11: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'maximum pressure'))) <= 1))) = 0;
 WR12: SIZEOF (QUERY (sfc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream flow characteristics') |
       NOT (SIZEOF (QUERY (it <* sfc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'stream data reference'))) <= 1))) = 0;
 WR13: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (pdr <* USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 
       'service operating characteristics')) = 1))) = 0);
 (*
 WR14: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition, 
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       NOT (SIZEOF (soc.used_representation.items) >= 3))) = 0))) = 0);

 WR15: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       {1 <= SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name IN ['temperature', 'minimum temperature', 
       'maximum temperature']))) <= 2})) = 1))) = 0);
 WR16: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR 
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'temperature'))) <= 1)) = 1))) = 0);
 WR17: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR 
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'minimum temperature'))) <= 1)) = 1))) = 0);
 WR18: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR 
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'maximum temperature'))) <= 1)) = 1))) = 0);
 WR19: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       {1 <= SIZEOF (QUERY (it <* soc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name IN ['pressure', 'minimum pressure', 
       'maximum pressure']))) <= 2})) = 1))) = 0);
 WR20: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'pressure'))) <= 1)) = 1))) = 0);
 WR21: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'minimum pressure'))) <= 1)) = 1))) = 0);
 WR22: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'maximum pressure'))) <= 1)) = 1))) = 0);
 WR23: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = |
       'service operating characteristics') |
       {1 <= SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT']) = 2) AND
       (it.name IN ['duration', 'minimum duration', 
       'maximum duration']))) <= 2})) = 1))) = 0);
*)
 WR24: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR 
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
--RR: original       pdr.used_representation.name = |
--RR: fixed:
       pdr.used_representation.name = 
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'duration'))) <= 1)) = 1))) = 0);
 WR25: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR 
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
--RR:       pdr.used_representation.name = |
       pdr.used_representation.name = 
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'minimum duration'))) <= 1)) = 1))) = 0);
 WR26: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR 
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT (SIZEOF (QUERY (soc <* QUERY (pdr <* 
       USEDIN (sc.related_property_definition,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
--RR:       pdr.used_representation.name = |
       pdr.used_representation.name =
       'service operating characteristics') |
       SIZEOF (QUERY (it <* soc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'maximum duration'))) <= 1)) = 1))) = 0);
 WR27: (NOT (SIZEOF (QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 
       'service characteristics')) >= 1)) OR 
       (SIZEOF (QUERY (sc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |
       pdr.related_property_definition.name = 'service characteristics') |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN 
       TYPEOF (sc.related_property_definition.definition)))) = 0);
END_ENTITY;
(*

Formal propositions:

WR1: A stream_design_case shall have at least one stream_phase.

WR2: A stream_design_case shall have exactly one representation with the name of `stream flow
characteristics'.

WR3: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at least two representation_items.

WR4: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have between one and two representation_items that are of type measure_representation_item
with a name of `flow rate', `maximum flow rate', or `minimum flow rate'.

WR5: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at most one representation_item that is of type measure_representation_item with a
name of `flow rate'. 

WR6: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at most one representation_item that is of type measure_representation_item with a
name of `minimum flow rate'. 

WR7: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at most one representation_item that is of type measure_representation_item with a
name of `maximum flow rate'. 

WR8: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have between one and two representation_items that are of type measure_representation_item
with a name of `pressure', `maximum pressure', or `minimum pressure'.

WR9: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at most one representation_item that is of type measure_representation_item with a
name of `pressure'. 

WR10: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at most one representation_item that is of type measure_representation_item with a
name of `minimum pressure'.

WR11: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at most one representation_item that is of type measure_representation_item with a
name of `maximum pressure'.

WR12: The representation of the stream_design_case with the name of `stream flow characteristics'
shall have at most one representation_item that is of type descriptive_representation_item with a
name of `stream reference data'. 

WR13: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the property_definition that is related with a name of `service characteristics' shall
have exactly one representation with the name of `stream operating characteristics'.

WR14: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the representation with the name of `stream operating characteristics' of that
property_definition shall have at least three representation_items.

WR15: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have one or two representation_items of type measure_representation_-
item and thermodynamic_temperature_measure_with_unit with a name of `temperature',
`minimum temperature', or `maximum temperature'.

WR16: If the stream_design_case relates to a property_definition with a name of `services
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item and thermodynamic_temperature_measure_with_unit with a name of `temperature'.

WR17: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item and thermodynamic_temperature_measure_with_unit with a name of `minimum temperature'.

WR18: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item and thermodynamic_temperature_measure_with_unit with a name of `maximum temperature'.

WR19: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have one or two representation_items of type measure_representation_-
item with a name of `pressure', `minimum pressure', or `maximum pressure'.

WR20: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item with a name of `pressure'.

WR21: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item with a name of `minimum pressure'.

WR22: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item with a name of `maximum pressure'.

WR23: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have one or two representation_items of type measure_representation_-
item and time_measure_with_unit with a name of `duration', `minimum duration', or `maximum
duration'.

WR24: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item and time_measure_with_unit with a name of `duration'.

WR25: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item and time_measure_with_unit with a name of `minimum duration'.

WR26: If the stream_design_case relates to a property_definition with a name of `service
characteristics', the  representation with the name of `stream operating characteristics' of that
property_definition shall have at most one representation_item of type measure_representation_-
item and time_measure_with_unit with a name of `maximum duration'.

WR27: If the stream_design_case relates to a property_definition with a name of `service
characteristics', that property_definition shall be a property of a plant_item_connector.

5.2.3.1.75  stream_phase

A stream_phase is a type of property_definition that identifies the characteristics of a gas, liquid,
vapour, or particulate phase.

EXPRESS specification:

*)
ENTITY stream_phase
  SUBTYPE OF (property_definition);
WHERE
  WR1: 'PLANT_SPATIAL_CONFIGURATION.STREAM_DESIGN_CASE' IN 
       TYPEOF (SELF.DEFINITION);
  WR2: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics')) = 1;
  WR3: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (spc.used_representation.items) >= 5))) = 0;
  WR4: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.RATIO_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'constituent mole fraction'))) = 1))) = 0;
  WR5: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'constituents'))) = 1))) = 0;
  WR6: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'phase density'))) = 1))) = 0;
  WR7: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.RATIO_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'phase fraction'))) = 1))) = 0;
  WR8: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT ({1 <= SIZEOF (QUERY (it <* spc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name IN ['temperature', 'minimum temperature', 
       'maximum temperature']))) <= 2}))) = 0;
  WR9: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'temperature'))) <= 1))) = 0;
 WR10: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'minimum temperature'))) <= 1))) = 0;
 WR11: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       (SIZEOF (TYPEOF (it) *
       ['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT']) = 2) AND
       (it.name = 'maximum temperature'))) <= 1))) = 0;
 WR12: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'specific gravity'))) <= 1))) = 0;
 WR13: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'surface tension'))) <= 1))) = 0;
 WR14: SIZEOF (QUERY (spc <* QUERY (pdr <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       pdr.used_representation.name = 'stream phase characteristics') |
       NOT (SIZEOF (QUERY (it <* spc.used_representation.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN
       TYPEOF (it)) AND
       (it.name = 'viscosity'))) <= 1))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A stream_phase shall define a property of a stream_design_case.

WR2: A stream_phase shall have exactly one representation with the name of `stream phase
characteristics'.

WR3: The representation of the stream_phase with the name of `stream phase characteristics' shall
have at least five representation_items.

WR4: The representation of the stream_phase with the name of `stream phase characteristics' shall
have exactly one representation_item that is of type measure_representation_item and ratio_-
measure_with_unit with a name of `constituent mole fraction'.

WR5: The representation of the stream_phase with the name of `stream phase characteristics' shall
have exactly one representation_item that is of type descriptive_representation_item with a name
of `constituents'.

WR6: The representation of the stream_phase with the name of `stream phase characteristics' shall
have exactly one representation_item that is of type measure_representation_item with a name of
`phase density'.

WR7: The representation of the stream_phase with the name of `stream phase characteristics' shall
have exactly one representation_item that is of type measure_representation_item and ratio_-
measure_with_unit with a name of `phase fraction'.

WR8: The representation of the stream_phase with the name of `stream phase characteristics' shall
have one or two representation_items of type measure_representation_item and thermodynamic_-
temperature_measure_with_unit with a name of `temperature', `minimum temperature', or
`maximum temperature'.

WR9: The representation of the stream_phase with the name of `stream phase characteristics' shall
have at most one representation_item of type measure_representation_item and thermodynamic_-
temperature_measure_with_unit with a name of `temperature'.

WR10: The representation of the stream_phase with the name of `stream phase characteristics' shall
have at most one representation_item of type measure_representation_item and thermodynamic_-
temperature_measure_with_unit with a name of `minimum temperature'.

WR11: The representation of the stream_phase with the name of `stream phase characteristics' shall
have at most one representation_item of type measure_representation_item and thermodynamic_-
temperature_measure_with_unit with a name of `maximum temperature'.

WR12: The representation of the stream_phase with the name of `stream phase characteristics' shall
have at most one representation_item that is of type measure_representation_item with a name of
`specific gravity'.

WR13: The representation of the stream_phase with the name of `stream phase characteristics' shall
have at most one representation_item that is of type measure_representation_item with a name of
`surface tension'.

WR14: The representation of the stream_phase with the name of `stream phase characteristics' shall
have at most one representation_item that is of type measure_representation_item with a name of
`viscosity'.

5.2.3.1.76  structural_load_connector_classification

A structural_load_connector_classification is a type of group that classifies the items that are
assigned to it as being structural load connectors.  The name of the structural_connector_-
classification further classifies the assigned items.

EXPRESS specification:

*)
ENTITY structural_load_connector_classification
  SUBTYPE OF (group);
END_ENTITY;
(*

5.2.3.1.77  structural_system

A structural_system is a type of product_definition that identifies a system or assembly of structural
components.

EXPRESS specification:

*)
ENTITY structural_system
  SUBTYPE OF (product_definition);
WHERE
  WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
       ('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF
       (pdr.relating_product_definition.formation.of_product)) AND
       (pdr.relating_product_definition.frame_of_reference.name =
       'functional occurrence'))) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: The structural_system shall be related to exactly one product_definition that is the definition
of a plant and has a context of `functional occurrence'.

5.2.3.1.78  support_constraint_representation

A support_constraint_representation is a type of representation that identifies limitations on the
movement of a plant item.

EXPRESS specification:

*)
ENTITY support_constraint_representation
  SUBTYPE OF (representation);
WHERE
  WR1: SIZEOF (SELF.items) >= 3;   
  WR2: SIZEOF (QUERY (it <* SELF.items |
       ('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM'
       IN TYPEOF (it)) AND
       (it.name IN ['negative x', 'positive x', 'negative y',
       'positive y', 'negative z', 'positive z',
       'negative x rotation', 'positive x rotation',
       'negative y rotation', 'positive y rotation',
       'negative z rotation', 'positive z rotation'] ))) = 1;
  WR3: SIZEOF (QUERY (it <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.RATIO_MEASURE_WITH_UNIT'
       IN TYPEOF (it))) = 1;
  WR4: SIZEOF (QUERY (it <* SELF.items |
       'PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM'
       IN TYPEOF (it))) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: The support_constraint_representation shall contain at least three items.

WR2: The support_constraint_representation shall contain measure_representation_items that have
a name of `negative x', `positive x', `negative y', `positive y', `negative z', `positive z', `negative x
rotation', `positive x rotation', `negative y rotation', `positive y rotation', `negative z rotation', or
`positive z rotation'.

WR3: The support_constraint_representation shall contain exactly one ratio_measure_with_unit.

WR4: The support_constraint_representation shall contain exactly one descriptive_-
representation_item.

5.2.3.1.79  swage_fitting_classification

A swage_fitting_classification is a type of group that classifies the items that are assigned to it as
swage fittings.

EXPRESS specification:

*)
ENTITY swage_fitting_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'swage'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A swage_fitting_classification shall classify items of type piping_component_definition.

WR2: A swage_fitting_classification shall classify items of type piping_component_definition that
are a definition of a product that is categorized as a `swage'.

5.2.3.1.80  system_classification

A system_classification is a type of group that classifies items that are assigned to it as systems.  The
name of the system classification may further classify the assigned item.

EXPRESS specification:

*)
ENTITY system_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT (SIZEOF (TYPEOF (it) * 
       ['PLANT_SPATIAL_CONFIGURATION.DUCTING_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.INSTRUMENTATION_AND_CONTROL_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.STRUCTURAL_SYSTEM']) = 1)
       )) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A system_classification shall classify items of type ducting_system, electrical_system,
instrumentation_and_control_system, piping_system, and structural_system.

5.2.3.1.81  system_space

A system_space is a type of product_definition_shape that identifies the shape of the space allocated
for an electrical_system, ducting_system, instrumentation_and_control_system, piping_system,
or structural_system.

EXPRESS specification:

*)
ENTITY system_space
  SUBTYPE OF (product_definition_shape);
WHERE
  WR1: SIZEOF (TYPEOF (SELF.definition) *
       ['PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.DUCTING_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'INSTRUMENTATION_AND_CONTROL_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM',
       'PLANT_SPATIAL_CONFIGURATION.STRUCTURAL_SYSTEM']) = 1;
END_ENTITY;
(*

Formal propositions:

WR1: A system_space shall define the shape of the space allocation for an electrical_system,
ducting_system, instrumentation_and_control_system, piping_system, or structural_system.

5.2.3.1.82  truncated_pyramid

A truncated_pyramid is a type of boolean_result that is a solid primitive with a square bottom face,
a square top face of smaller size than the bottom face, and four trapezoidal faces that connect the top
and bottom face.

EXPRESS specification:

*)
ENTITY truncated_pyramid
  SUBTYPE OF (boolean_result);
END_ENTITY;
(*

5.2.3.1.83  valve_classification

A valve_classification is a type of group that classifies the items are assigned to it as valves.  The
name of the valve_classification may further classify the assigned items.

EXPRESS specification:

*)
ENTITY valve_classification
  SUBTYPE OF (group);
WHERE
  WR1: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (it <* ca.items |
       NOT ('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)))) = 0))) = 0;
  WR2: SIZEOF (QUERY (ca <* QUERY (ga <* USEDIN (SELF,
       'PLANT_SPATIAL_CONFIGURATION.GROUP_ASSIGNMENT.ASSIGNED_GROUP') |
       'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT' IN 
       TYPEOF (ga)) |
       NOT (SIZEOF (QUERY (pcd <* QUERY (it <* ca.items |
       'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN
       TYPEOF (it)) |
       NOT (SIZEOF (QUERY (prpc <* USEDIN (pcd.formation.of_product,
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
       category_in_tree (prpc, 'valve'))) = 1))) = 0))) = 0;
END_ENTITY;
(*

Formal propositions:

WR1: A valve_classification shall classify items of type piping_component_definition.

WR2: A valve_classification shall classify items of type piping_component_definition that are a
definition of a product that is categorized as a `valve'.

5.2.3.2  Plant spatial configuration imported entity modifications

5.2.3.2.1  action_request_status

The base definition of the action_request_status entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the action_request_status
entity:

    þ change_life_cycle_stage_usage_requires_stage (see 5.2.4.8).

5.2.3.2.2  application_context

The base definition of the application_context entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the application_context entity:

    þ application_context_requires_ap_definition (see 5.2.4.1);

    þ dependent_instantiable_application_context (see 5.2.4.9).

5.2.3.2.3  application_protocol_definition

The base definition of the application_protocol_definition entity is given in ISO 10303-41.  The
following modifications apply to this part of ISO 10303.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the application_protocol_-
definition entity:

    þ application_context_requires_ap_definition (see 5.2.4.1).

5.2.3.2.4  approval

The base definition of the approval entity is given in ISO 10303-41.  The following modifications
apply to this part of ISO 10303.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the approval entity:

    þ approval_requires_approval_date_time (see 5.2.4.2);

    þ approval_requires_approval_person_organization (see 5.2.4.3).

5.2.3.2.5  approval_date_time

The base definition of the approval_date_time entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the approval_date_time entity:

    þ approval_requires_approval_date_time (see 5.2.4.2).

5.2.3.2.6  approval_person_organization

The base definition of the approval_person_organization entity is given in ISO 10303-41.  The
following modifications apply to this part of ISO 10303.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the approval_person_-
organization entity:

    þ approval_requires_approval_person_organization (see 5.2.4.3).

5.2.3.2.7  externally_defined_item

The base definition of the externally_defined_item entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the externally_defined_item
entity:

    þ subtype_mandatory_externally_defined_item (see 5.2.4.17).

5.2.3.2.8  pre_defined_item

The base definition of the pre_defined_item entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the pre_defined_item entity:

    þ subtype_mandatory_defined_item (see 5.2.4.18).

5.2.3.2.9  product_context

The base definition of the product_context entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the product_context entity:

    þ dependent_instantiable_product_context (see 5.2.4.10);

    þ product_context_discipline_type_constraint (see 5.2.4.12).

5.2.3.2.10  product_definition

The base definition of the product_definition entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rule:

The following global rule defined in this part of ISO 10303 applies to the product_definition entity:

    þ product_definition_usage_constraint (see 5.2.4.14).

5.2.3.2.11  product_definition_context

The base definition of the product_definition_context entity is given in ISO 10303-41.  The
following modifications apply to this part of ISO 10303.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the product_definition_context
entity:

    þ dependent_instantiable_product_definition_context (see 5.2.4.11);

    þ product_definition_context_name_constraint (see 5.2.4.13).

5.2.3.2.12  versioned_action_request

The base definition of the versioned_action_request entity is given in ISO 10303-41.  The following
modifications apply to this part of ISO 10303.

Associated global rules:

The following global rules defined in this part of ISO 10303 apply to the versioned_action_request
entity:

    þ change_life_cycle_stage_usage_requires_approval (see w>G@Pè¹ýÄ);

    þ change_life_cycle_stage_usage_requires_stage (see 5.2.4.8);

    þ versioned_action_request_requires_change_action (see 5.2.4.19).

5.2.4  Plant spatial configuration rule definitions

5.2.4.1  application_context_requires_ap_definition

The application_context_requires_ap_definition rule specifies that each instance of application_-
context shall be referenced by exactly one application_protocol_definition that specifies this part of
ISO 10303.  
EXPRESS specification:

*)
RULE application_context_requires_ap_definition FOR 
  (application_context, application_protocol_definition);
WHERE
  WR1: SIZEOF (QUERY (ac <* application_context | 
       NOT (SIZEOF (QUERY (apd <* application_protocol_definition | 
       (ac :=: apd.application) 
       AND
       (apd.application_interpreted_model_schema_name =   
       'plant_spatial_configuration'))) = 1 ))) = 0;
END_RULE;
(*

Argument definitions:

application_context:  the set of all instances of application_context entities.

application_protocol_definition:  the set of all instances of application_protocol_definition entities.

Formal propositions:

WR1:  For each instance of application_context, there shall be exactly one instance of application_-
protocol_definition that references the instance of application_context as its application with a value
of `plant_spatial_configuration' as its application_interpreted_model_schema_name.

5.2.4.2  approval_requires_approval_date_time

Every approval shall have exactly one approval_date_time.

EXPRESS specification:

*)
RULE approval_requires_approval_date_time FOR
  (approval_date_time,
   approval);
WHERE
  WR1: SIZEOF (QUERY (app <* approval |
       NOT (SIZEOF (QUERY (adt <* approval_date_time |
       (app :=: adt.dated_approval))) = 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each approval there shall be exactly one approval_date_time that has the approval as
its dated_approval.

5.2.4.3  approval_requires_approval_person_organization

Every approval shall have exactly one approval_person_organization.

EXPRESS specification:

*)
RULE approval_requires_approval_person_organization FOR
  (approval_person_organization,
   approval);
WHERE
  WR1: SIZEOF (QUERY (app <* approval |
       NOT (SIZEOF (QUERY (apo <* approval_person_organization |
       (app :=: apo.authorized_approval))) = 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each approval there shall be exactly one approval_person_organization that has the
approval as its authorized_approval.

5.2.4.4  change_action_requires_date

Every change_action shall have a date assigned to it.

EXPRESS specification:

*)
RULE change_action_requires_date FOR
  (change_action, 
   plant_spatial_configuration_date_assignment);
WHERE
  WR1: SIZEOF (QUERY (ca <* change_action |
       NOT (SIZEOF (QUERY (pscda <*
       plant_spatial_configuration_date_assignment |
       (ca IN pscda.items))) = 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each change_action there shall be exactly one plant_spatial_configuration_date_-
assignment that contains the change_action in its set of items.

5.2.4.5  change_item_requires_creation_date

Every item of a plant_spatial_configuration_change_assignment shall have a date assigned to it with
the role of `creation date'.

EXPRESS specification:

*)
RULE change_item_requires_creation_date FOR
  (plant_spatial_configuration_change_assignment,
   plant_spatial_configuration_date_assignment);
WHERE
  WR1: SIZEOF (QUERY (pscca <* 
           plant_spatial_configuration_change_assignment |
       NOT (SIZEOF (QUERY (ch_it <* pscca.items |
       NOT (SIZEOF (QUERY (pscda <* 
           plant_spatial_configuration_date_assignment |
       (NOT (ch_it IN pscda.items) OR
       (pscda.role.name = 'creation date')))) = 1))) = 0))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each item of a plant_spatial_configuration_change_assignment there shall be exactly
one plant_spatial_configuration_date_assignment with a role of `creation date' that assigns a date
to the item.

5.2.4.6  change_item_requires_id

Every item of a plant_spatial_configuration_change_assignment shall have an identification assigned
to it.

EXPRESS specification:

*)
RULE change_item_requires_id FOR
  (plant_spatial_configuration_change_assignment,
   change_item_id_assignment);
WHERE
  WR1: SIZEOF (QUERY (pscca <* 
           plant_spatial_configuration_change_assignment |
       NOT (SIZEOF (QUERY (ch_it <* pscca.items |
       NOT (SIZEOF (QUERY (ciia <* change_item_id_assignment |
       (ch_it IN ciia.items))) = 1))) = 0))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each item of a plant_spatial_configuration_change_assignment there shall be exactly
one change_item_id_assignment that assigns an identification to the item.

5.2.4.7  change_life_cycle_stage_usage_requires_approval

Every versioned_action_request shall have an approval assigned to it.

EXPRESS specification:

*)
RULE change_life_cycle_stage_usage_requires_approval FOR
  (versioned_action_request,
   plant_spatial_configuration_approval_assignment);
WHERE
  WR1: SIZEOF (QUERY (vareq <* versioned_action_request |
       NOT (SIZEOF (QUERY (pscaa <*
       plant_spatial_configuration_approval_assignment |
       vareq IN pscaa.items)) = 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each versioned_action_request there shall be exactly one plant_spatial_configuration_-
approval_assignment that contains the versioned_action_request in its set of items.

5.2.4.8  change_life_cycle_stage_usage_requires_stage

Every versioned_action_request shall have a status assigned to it.

EXPRESS specification:

*)
RULE change_life_cycle_stage_usage_requires_stage FOR
  (versioned_action_request,
   action_request_status);
WHERE
  WR1: SIZEOF (QUERY (vareq <* versioned_action_request |
       NOT (SIZEOF (QUERY (ars <* action_request_status |
       vareq :=: ars.assigned_request)) = 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each versioned_action_request there shall be exactly one action_request_status that has
the versioned_action_request as its assigned_request.

5.2.4.9  dependent_instantiable_application_context

The dependent_instantiable_application_context rule specifies that all instances of application_-
context are dependent on their usage to define another entity.

EXPRESS specification:

*)
RULE dependent_instantiable_application_context FOR (application_context);
WHERE
  WR1: SIZEOF (QUERY (ac <* application_context |
       NOT (SIZEOF (USEDIN (ac, '')) >= 1))) = 0;
END_RULE;
(*

Argument definition:

application_context:  the set of all instances of application_context.

Formal proposition:

WR1:  For each instance of application_context, there shall be a reference to the application_context
instance from an attribute of another entity.

5.2.4.10  dependent_instantiable_product_context

The dependent_instantiable_product_context rule specifies that all instances of product_context are
dependent on their usage to define another entity.

EXPRESS specification:

*)
RULE dependent_instantiable_product_context FOR (product_context);
WHERE
  WR1: SIZEOF (QUERY (pc <* product_context |
       NOT (SIZEOF (USEDIN (pc, '')) >= 1))) = 0;
END_RULE;
(*

Argument definition:

product_context:  the set of all instances of product_context.

Formal proposition:

WR1:  For each instance of product_context, there shall be a reference to the product_context
instance from an attribute of another entity.

5.2.4.11  dependent_instantiable_product_definition_context

The dependent_instantiable_product_definition_context rule specifies that all instances of product_-
definition_context are dependent on their usage to define another entity.

EXPRESS specification:

*)
RULE dependent_instantiable_product_definition_context FOR 
  (product_definition_context);
WHERE
  WR1: SIZEOF (QUERY (pdc <* product_definition_context |
       NOT (SIZEOF (USEDIN (pdc, '')) >= 1))) = 0;
END_RULE;
(*

Argument definition:

product_definition_context:  the set of all instances of product_definition_context.

Formal proposition:

WR1:  For each instance of product_definition_context, there shall be a reference to the product_-
definition_context instance from an attribute of another entity.

5.2.4.12  product_context_discipline_type_constraint

Every product_context shall have a discipline_type of `process plant'.

EXPRESS specification:

*)
RULE product_context_discipline_type_constraint FOR
  (product_context);
WHERE
  WR1: SIZEOF (QUERY (pc <* product_context |
       NOT (pc.name = 'process plant'))) = 0;
END_RULE;
(*

Formal propositions:

WR1: For each product_context, the name shall be `process plant'.

5.2.4.13  product_definition_context_name_constraint

Every product_definition_context shall have a name of `functional definition', `physical definition',
`functional occurrence', `physical occurrence', `catalogue definition', or `fabrication assembly'.

EXPRESS specification:

*)
RULE product_definition_context_name_constraint FOR
  (product_definition_context);
WHERE
  WR1: SIZEOF (QUERY (pdc <* product_definition_context |
       NOT (pdc.name IN
       ['functional definition', 'physical definition',
        'functional occurrence', 'physical occurrence',
        'catalogue definition', 'fabrication assembly']))) = 0;
END_RULE;
(*

Formal propositions:

WR1: For each product_definition_context, the name shall be `functional definition', `physical
definition', `functional occurrence', `physical occurrence', `catalogue definition', or `fabrication
assembly'.

5.2.4.14  product_definition_usage_constraint

Every product_definition that identifies an item that may be used as a component of a plant shall
have restricted participation in relationships with other product_definitions.

EXPRESS specification:

*)
RULE product_definition_usage_constraint FOR (product_definition);
WHERE
  WR1: SIZEOF (QUERY (pd <* product_definition |
       ((pd.frame_of_reference.name = 'physical occurrence') AND
       (NOT (SIZEOF (QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_RELATIONSHIP.' +
       'RELATED_PRODUCT_DEFINITION') |
       SIZEOF (TYPEOF (pdr) *
       ['PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_USAGE',
       'PLANT_SPATIAL_CONFIGURATION.MAKE_FROM_USAGE_OPTION',
       'PLANT_SPATIAL_CONFIGURATION.ASSEMBLY_COMPONENT_USAGE']) 
       = 1)) <= 1))))) = 0;
  WR2: SIZEOF (QUERY (pd <* product_definition |
       ((pd.frame_of_reference.name = 'physical definition') AND
       (NOT (SIZEOF (QUERY (pdr <* USEDIN (pd,
       'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_RELATIONSHIP.' +
       'RELATING_PRODUCT_DEFINITION') |
       pdr.related_product_definition.frame_of_reference.name =
       'physical occurrence')) <= 1))))) = 0;
END_RULE;
(*

Formal propositions:

WR1: For each product_definition that has a product_definition_context where the name is
`physical occurrence', the product_definition shall be the related product_definition in at most one
product_definition_usage, make_from_usage_option, or assembly_component_usage.

WR2: For each product_definition that has a product_definition_context where the name is
`physical definition', the product_definition shall be related to at most one product_definition that
has a product_definition_context where the name is `physical occurrence'.

5.2.4.15  subtype_exclusive_characterized_object

All instances of characterized_object shall be an instance of at most one of piping_component_class,
site, or stream_design_case.

EXPRESS specification:

*)
RULE subtype_exclusive_characterized_object FOR 
  (characterized_object);
WHERE
  WR1: SIZEOF (QUERY (co <*characterized_object |
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_CLASS',
       'PLANT_SPATIAL_CONFIGURATION.SITE',
       'PLANT_SPATIAL_CONFIGURATION.STREAM_DESIGN_CASE']
       * TYPEOF (co)) <= 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1: Every instance of characterized_object shall also be an instance of at most one of
piping_component_class, site, or stream_design_case.

5.2.4.16  subtype_exclusive_shape_representation

All instances of shape_representation shall be instances of at most one of advanced_csg_shape_-
representation, hybrid_shape_representation, or piping_design_csg_shape_representation.

EXPRESS specification:

*)
RULE subtype_exclusive_shape_representation FOR 
  (shape_representation);
WHERE
  WR1: SIZEOF (QUERY (sr <*shape_representation|
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.' +
       'ADVANCED_CSG_SHAPE_REPRESENTATION',
       'PLANT_SPATIAL_CONFIGURATION.HYBRID_SHAPE_REPRESENTATION',
       'PLANT_SPATIAL_CONFIGURATION.' +
       'PIPING_DESIGN_CSG_SHAPE_REPRESENTATION']
       * TYPEOF (sr)) <= 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1: Every instance of shape_representation shall be an instance of at most one of advanced_csg_-
shape_representation, hybrid_shape_representation, or piping_design_csg_shape_representation.

5.2.4.17  subtype_mandatory_externally_defined_item

All instances of externally_defined_item shall be instances of known_source.

EXPRESS specification:

*)
RULE subtype_mandatory_externally_defined_item FOR 
  (externally_defined_item);
WHERE
  WR1: SIZEOF (QUERY (edi <* externally_defined_item |
       NOT (SIZEOF (['PLANT_SPATIAL_CONFIGURATION.CATALOGUE_CONNECTOR',
       'PLANT_SPATIAL_CONFIGURATION.EXTERNALLY_DEFINED_CLASSIFICATION',
      
'PLANT_SPATIAL_CONFIGURATION.EXTERNALLY_DEFINED_PLANT_ITEM_DEFINITION']
       * TYPEOF (edi)) = 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1: Every instance of externally_defined_item shall also be an instance of one of catalogue_-
connector, externally_defined_classification or externally_defined_plant_item_definition.

5.2.4.18  subtype_mandatory_pre_defined_item

All instances of pre_defined_item shall be instances of known_source.

EXPRESS specification:

*)
RULE subtype_mandatory_pre_defined_item FOR 
  (pre_defined_item);
WHERE
  WR1: SIZEOF (QUERY (pdi <* pre_defined_item |
       NOT ('PLANT_SPATIAL_CONFIGURATION.KNOWN_SOURCE' IN
       TYPEOF (pdi)))) = 0;
END_RULE;
(*

Formal propositions:

WR1: Every instance of pre_defined_item shall also be an instance of known_source.

E8U:  versioned_action_request_requires_change_action

Every versioned_action_request shall be the request for exactly one change_action.

EXPRESS specification:

*)
RULE versioned_action_request_requires_change_action FOR
  (change_action, 
   versioned_action_request);
WHERE
  WR1: SIZEOF (QUERY (vareq <* versioned_action_request |
       NOT (SIZEOF (QUERY (ca <* change_action |
       (vareq IN ca.directive.requests))) = 1))) = 0;
END_RULE;
(*

Formal propositions:

WR1:  For each versioned_action_request there shall be exactly one change_action whose directive
contains the versioned_action_request in its set of requests.

5.2.5  Plant spatial configuration function definitions

5.2.5.1  bag_to_set

The bag_to_set function converts BAGs into SETs.

      EXAMPLE  - It can be used to convert the BAGs returned by the USEDIN function into SETs
      that can be properly assigned to variables that are SETs.

EXPRESS specification:

*)
FUNCTION bag_to_set (the_bag: BAG OF GENERIC:intype) :
    SET OF GENERIC:intype;

  LOCAL
    the_set : SET OF GENERIC:intype := [];
    i       : INTEGER;
  END_LOCAL;
  IF SIZEOF(the_bag) > 0 THEN
    REPEAT i := 1 TO HIINDEX(the_bag) BY 1;
      the_set := the_set + the_bag[i];
    END_REPEAT;
  END_IF;
  RETURN(the_set);
END_FUNCTION;
(*

Argument definitions:

the_bag:  the BAG that is to be converted into a SET.

5.2.5.2  category_in_tree

The category_in_tree function is a boolean function that returns true if the specified product_-
category has the name specified by the val parameter, or if the specified product_category has a
super_category with the name specified by the val parameter.
 
EXPRESS specification:

*)
FUNCTION category_in_tree (cat : product_category; val : STRING) : BOOLEAN;
  IF cat.name = val THEN RETURN (TRUE);
  ELSE
    RETURN (SIZEOF (QUERY (pc <* USEDIN (cat,
'PLANT_SPATIAL_CONFIGURATION.' +
    'PRODUCT_CATEGORY_RELATIONSHIP.SUB_CATEGORY') |
    category_in_tree (pc, val))) = 1);
  END_IF;
  RETURN (FALSE);
END_FUNCTION;
(*

Argument definitions:

cat: the product_category the name that the specified value is required for.

val: the value that is required for the product_category.

5.2.5.3  plant_spatial_configuration_organization_correlation

The plant_spatial_configuration_organization_correlation boolean function returns TRUE if the
name attribute of the organization_role entity is coordinated with the type of entity selected in the
items of a plant_spatial_configuration_organization_assignment.

      EXAMPLE  - If the role for an organization is `vendor', then all of the items in the set must be
      either product or document.

EXPRESS specification:

*)
FUNCTION plant_spatial_configuration_organization_correlation
  (e : plant_spatial_configuration_organization_assignment ) : BOOLEAN;
  LOCAL
    o_role : STRING;
  END_LOCAL;
    o_role := e\organization_assignment.role.name;
  CASE o_role OF
    'vendor'            : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          SIZEOF(['PLANT_SPATIAL_CONFIGURATION.PRODUCT',
                                  'PLANT_SPATIAL_CONFIGURATION.DOCUMENT'] *
                          TYPEOF (x)) = 1))
                          THEN RETURN(FALSE);
                          END_IF;
    'owner'             : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          SIZEOF(['PLANT_SPATIAL_CONFIGURATION.SITE',
                                 'PLANT_SPATIAL_CONFIGURATION.DOCUMENT'] *
                          TYPEOF (x)) = 1))
                          THEN RETURN(FALSE);
                          END_IF;
    'plant operator'    : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.PLANT'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    'plant owner'       : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.PLANT'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    'project owner'     : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.DESIGN_PROJECT'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    'assessor'          : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.' +
                          'PRODUCT_DEFINITION_RELATIONSHIP'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    OTHERWISE : RETURN(TRUE);
  END_CASE;
  RETURN (TRUE);
END_FUNCTION;
(*

Argument definitions:

e: the input plant_spatial_configuration_organization_assignment to be checked.

5.2.5.4  plant_spatial_configuration_person_and_organization_correlation

The plant_spatial_configuration_person_and_organization_correlation boolean function returns
TRUE if the name attribute of the person_organization_role entity is coordinated with the type of
entity selected in the items of a plant_spatial_configuration_person_and_organization_assignment.

      EXAMPLE  - If the role for a person_and_organization is `owner', then all of the items in the
      set must be either site or change_item.

EXPRESS specification:

*)
FUNCTION plant_spatial_configuration_person_and_organization_correlation
  (e : plant_spatial_configuration_person_and_organization_assignment )
  : BOOLEAN;
  LOCAL
    po_role : STRING;
  END_LOCAL;
    po_role := e\person_and_organization_assignment.role.name;
  CASE po_role OF
    'owner'             : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          SIZEOF(['PLANT_SPATIAL_CONFIGURATION.SITE',
                                 'PLANT_SPATIAL_CONFIGURATION.' +
                                 'CHANGE_ITEM'] *
                          TYPEOF (x)) = 1))
                          THEN RETURN(FALSE);
                          END_IF;
    'plant owner'       : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.PLANT'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    'plant operator'    : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.PLANT'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    OTHERWISE : RETURN(TRUE);
  END_CASE;
  RETURN (TRUE);
END_FUNCTION;
(*

Argument definitions:

e: the input plant_spatial_configuration_person_and_organization_assignment to be checked.

5.2.5.5  plant_spatial_configuration_person_correlation

The plant_spatial_configuration_person_correlation boolean function returns TRUE if the name
attribute of the person_role entity is coordinated with the type of entity selected in the items of a
plant_spatial_configuration_person_assignment.

      EXAMPLE  - If the role for a person is `owner', then all of the items in the set must be either
      site or document.

EXPRESS specification:

*)
FUNCTION plant_spatial_configuration_person_correlation
  (e : plant_spatial_configuration_person_assignment ) : BOOLEAN;
  LOCAL
    p_role : STRING;
  END_LOCAL;
    p_role := e\person_assignment.role.name;
  CASE p_role OF
    'vendor'            : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.DOCUMENT'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    'owner'             : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          SIZEOF(['PLANT_SPATIAL_CONFIGURATION.SITE',
                                 'PLANT_SPATIAL_CONFIGURATION.DOCUMENT'] *
                          TYPEOF (x)) = 1))
                          THEN RETURN(FALSE);
                          END_IF;
    'plant owner'       : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.PLANT'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    'assessor'          : IF SIZEOF (e.items) <>
                          SIZEOF (QUERY (x <* e.items |
                          'PLANT_SPATIAL_CONFIGURATION.' +
                          'PRODUCT_DEFINITION_RELATIONSHIP'
                          IN TYPEOF (x)))
                          THEN RETURN(FALSE);
                          END_IF;
    OTHERWISE : RETURN(TRUE);
  END_CASE;
  RETURN (TRUE);
END_FUNCTION;
(*

Argument definitions:

e: the input plant_spatial_configuration_person_assignment to be checked.

5.2.5.6  valid_advanced_csg_tree

The valid_advanced_csg_tree function returns true if the elements that comprise the CSG tree passed
in as a parameter satisfy the requirements defined for advanced CSG trees.

*)
FUNCTION valid_advanced_csg_tree (tree_element : boolean_operand) :
BOOLEAN;

  -- return true if the tree_element is a valid primitive

  IF SIZEOF (TYPEOF (tree_element) *
--RR: original    ['PLANT_SPATIAL_CONFIGURATION.BLOCK',|
--RR: fixed
    ['PLANT_SPATIAL_CONFIGURATION.BLOCK',
    'PLANT_SPATIAL_CONFIGURATION.TORUS',
    'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CYLINDER', 
    'PLANT_SPATIAL_CONFIGURATION.SPHERE',
    'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CONE',
    'PLANT_SPATIAL_CONFIGURATION.' + 
    'ADVANCED_FACE_WITH_THICKNESS_SHAPE_REPRESENTATION',
    'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID',
    'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID',
--RR - original-    'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID']) = 1 |
--RR: fixed
    'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID']) = 1 
    THEN RETURN (TRUE); 
    ELSE 

    -- if the tree_element is a boolean_result check its operations and
    -- operands

--RR: -original-    IF 'PLANT_SPATIAL_CONFIGURATION.BOOLEAN_RESULT' |
--RR: fixed
    IF 'PLANT_SPATIAL_CONFIGURATION.BOOLEAN_RESULT' 
    IN TYPEOF (tree_element) 
      THEN

      -- addition and subtraction are the only valid operations

      IF NOT (tree_element\boolean_result.operator
        IN [boolean_operator.union, boolean_operator.difference])
        THEN RETURN (FALSE);
      END_IF;

      -- if the operand is a half_space_solid, check for advanced surface
      -- otherwise return false and recursively check second operand

      IF 'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID' IN 
        TYPEOF (tree_element\boolean_result.first_operand) THEN
        IF 'PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE' IN
          TYPEOF (tree_element\boolean_result.
                  first_operand\half_space_solid.base_surface) THEN
          IF 'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID' IN 
            TYPEOF (tree_element\boolean_result.second_operand) THEN
            IF 'PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE' IN
              TYPEOF (tree_element\boolean_result.
                      second_operand\half_space_solid.base_surface) THEN
              RETURN (TRUE);
              ELSE RETURN (FALSE);
            END_IF;
            ELSE RETURN (valid_advanced_csg_tree
            (tree_element\boolean_result.second_operand));
          END_IF;
          ELSE RETURN (FALSE);
        END_IF;
        ELSE
          IF 'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID' IN 
            TYPEOF (tree_element\boolean_result.second_operand) THEN
            IF 'PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE' IN TYPEOF
              (tree_element\boolean_result.second_operand\half_space_solid.
               base_surface) THEN
              RETURN (valid_advanced_csg_tree
                        (tree_element\boolean_result.first_operand));
              ELSE
              RETURN (FALSE);
            END_IF;
            ELSE
            RETURN (valid_advanced_csg_tree
                      (tree_element\boolean_result.first_operand) AND
                    valid_advanced_csg_tree
                      (tree_element\boolean_result.second_operand));
          END_IF;
      END_IF;
    END_IF;
  END_IF;
  RETURN (FALSE);
END_FUNCTION;
(*

Argument definitions:

tree_element:  (input) the boolean_operand to be evaluated.

*)
END_SCHEMA;
